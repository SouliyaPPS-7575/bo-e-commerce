const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-ue79-INe.js","assets/vendor_react-CbcXT_7b.js","assets/vendor_mui-Hs1nlRIC.js","assets/rest-D4Y_ACcK.js","assets/la-Bky_15MC.js"])))=>i.map(i=>d[i]);
var Hr=Object.defineProperty;var n=(t,r)=>Hr(t,"name",{value:r,configurable:!0});import{S as qr,g as Vr,r as f,H as e,L as Ht,a as Ee,f as re,d as qt,U as Yr,V as Kr,Q as Gr,W as Qr,q as Xr,X as Jr}from"./vendor_react-CbcXT_7b.js";import{L as Zr,N as xe,O as B,R as lt,S as U,T as N,U as ze,V as q,W as es,X as Pe,Y as He,Z as T,$ as Vt,a0 as I,a1 as he,a2 as H,a3 as Ae,a4 as V,a5 as _,a6 as qe,a7 as se,a8 as Q,a9 as Yt,aa as Kt,ab as O,ac as Ve,ad as $e,ae as Gt,af as Ye,ag as D,ah as ts,ai as R,aj as Ue,ak as L,al as rs,am as Qt,an as we,ao as Ke,ap as ss,aq as Fe,ar as $,as as ce,at as os,au as Xt,av as ns,aw as as,e as _t,ax as is,ay as cs,az as ls,aA as ds,aB as us,aC as xs,aD as hs,E as ms,aE as ps,aF as dt,aG as Le,aH as ut,aI as xt,aJ as gs,aK as js,aL as fs,aM as ys,aN as bs,aO as vs,aP as Re,aQ as le,aR as Jt,aS as ht,aT as ws,aU as mt,aV as X,aW as pt,aX as Zt,aY as Cs,aZ as _s,a_ as Ss,a$ as Ts,b0 as Is,c as Ds,b1 as Ls,b2 as je,b3 as ks,b4 as Es,b5 as Ps,b6 as er,b7 as As,b8 as tr,b9 as rr,ba as sr,bb as Ne,bc as or,bd as $s,be as Fs,bf as Rs,bg as Bs,bh as nr,bi as Os,bj as Ms,bk as St,bl as Tt,bm as Us,bn as Ns,bo as Ws,bp as zs,bq as Hs,br as qs,o as Vs,bs as ar,bt as Ie,D as Ys,bu as Ks,bv as Gs,G as Qs,bw as Xs,bx as Js,by as Z}from"./vendor-ue79-INe.js";import{a as J,a8 as x,a_ as E,aF as P,d as u,V as We,b1 as Zs,b4 as eo,bm as ir,bn as cr,bo as lr,h as to,bw as ro,i as dr,f as ur,bx as b,by as De,bz as xr,I as ke,b2 as so,bA as oo,aV as k,bB as gt,bC as no,ax as jt,U as Ge,bD as ao,bE as io,bF as co,bG as lo,bH as uo,B as oe,bI as xo,s as ft,j as Ce,bJ as ho,bK as nt,bL as yt,aH as me,aI as Be,aJ as A,aK as v,aM as pe,bM as hr,bN as mr,aC as pr,aU as mo,aN as gr,aA as It,aL as Dt,bO as Lt,g as jr,bP as po,bQ as go,a0 as jo,bR as fo,bS as at,bT as yo,aq as bo,bU as vo,c as wo,bV as Co,A as _o,bW as So,bX as fr,bY as bt,bZ as To,af as Io,b_ as Do,b$ as Lo,c0 as ko,c1 as Eo,c2 as Po,aE as Ao,c3 as $o,c4 as Fo,c5 as yr,w as br,bs as vr,t as wr,c6 as Cr,c7 as _r,H as Ro,ak as Bo,a5 as Oo,c8 as Mo,c9 as Uo,n as vt,aD as No,o as Wo,b5 as zo}from"./vendor_mui-Hs1nlRIC.js";n(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}n(s,"getFetchOpts");function a(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}n(a,"processPreload")},"polyfill")();const Ho="modulepreload",qo=n(function(t){return"/"+t},"assetsURL"),kt={},_e=n(function(r,s,a){let o=Promise.resolve();if(s&&s.length>0){let c=n(function(l){return Promise.all(l.map(h=>Promise.resolve(h).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))},"allSettled2");document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(s.map(l=>{if(l=qo(l),l in kt)return;kt[l]=!0;const h=l.endsWith(".css"),j=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${j}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Ho,h||(p.as="script"),p.crossOrigin="",p.href=l,m&&p.setAttribute("nonce",m),document.head.appendChild(p),h)return new Promise((w,y)=>{p.addEventListener("load",w),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return n(i,"handlePreloadError"),o.then(c=>{for(const d of c||[])d.status==="rejected"&&i(d.reason);return r().catch(i)})},"preload"),g=new Zr("https://sensornode.shop");g.autoCancellation(!1);const ve=n(async(t,r)=>await g.collection(t).getOne(r),"fetchPocketbaseDocument");async function Vo(t){return(await g.collection(t).getFullList()).map(s=>s)}n(Vo,"fetchAllPocketbaseDocuments");async function Yo(t,r){return(await g.collection(t).create(r)).id}n(Yo,"createPocketbaseDocument");async function Et(t,r,s){await g.collection(t).update(r,s)}n(Et,"updatePocketbaseDocument");async function Pt(t,r){await g.collection(t).delete(r)}n(Pt,"deletePocketbaseDocument");const Ko={login:n(async({email:t,password:r})=>{var s,a,o;try{const i=await g.collection("users").authWithPassword(t,r);localStorage.setItem("username",(s=i==null?void 0:i.record)==null?void 0:s.username),localStorage.setItem("avatar",(a=i==null?void 0:i.record)==null?void 0:a.avatar),localStorage.setItem("id",(o=i==null?void 0:i.record)==null?void 0:o.id);const c=i.token;return c&&g.authStore.save(c),Promise.resolve()}catch{return Promise.reject()}},"login"),logout:n(()=>(localStorage.removeItem("username"),Promise.resolve()),"logout"),checkError:n(()=>Promise.resolve(),"checkError"),checkAuth:n(()=>localStorage.getItem("username")?Promise.resolve():Promise.reject(),"checkAuth"),getPermissions:n(()=>Promise.resolve(),"getPermissions"),getIdentity:n(()=>Promise.resolve({id:localStorage.getItem("id")||"",fullName:localStorage.getItem("username")||"",avatar:localStorage.getItem("avatar")||""}),"getIdentity")},Qe=qr(t=>({selectImage:null,setSelectImage:n(r=>t({selectImage:r}),"setSelectImage")})),Sr=n(()=>{const{data:t}=Vr({queryKey:["currencies"],queryFn:n(async()=>await Vo("currency"),"queryFn")});return{currencies:t}},"useCurrency"),Tr=f.createContext(void 0),Go=n(({children:t})=>{const{currencies:r}=Sr(),[s,a]=f.useState("USD"),[o,i]=f.useState(1),c=f.useMemo(()=>{switch(s){case"THB":return"à¸¿";case"USD":return"$";case"LAK":return"LAK";default:return s}},[s]);f.useEffect(()=>{const m=r==null?void 0:r.find(l=>(l==null?void 0:l.ccy)===s&&(l==null?void 0:l.type)==="SELL");m&&i(Number(m.rate))},[s,r]);const d=f.useCallback(m=>m/o,[o]);return e.jsx(Tr.Provider,{value:{currency:s,displayCurrency:c,rate:o,convert:d,setCurrency:a},children:t})},"CurrencyProvider"),ne=n(()=>{const t=f.useContext(Tr);if(!t)throw new Error("useCurrencyContext must be used within a CurrencyProvider");return t},"useCurrencyContext"),Qo=n((t,r="en-US")=>{const s=t%1!==0;return new Intl.NumberFormat(r,{style:"decimal",minimumFractionDigits:s?2:0,maximumFractionDigits:2}).format(t)},"formatCurrency$1"),de=n((t,r="en-US")=>{const s=t%1>=.5?Math.ceil(t):Math.floor(t);return new Intl.NumberFormat(r,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)},"formatCurrency"),Xo=n(()=>(J(t=>t.breakpoints.down("md")),e.jsx(xe,{perPage:24,sort:{field:"name",order:"ASC"},actions:e.jsx(tn,{}),children:e.jsxs(x,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"}},children:[e.jsx(en,{}),e.jsx(x,{sx:{flex:1},children:e.jsx(Jo,{})})]})})),"ProductList"),Jo=n(()=>{const{data:t,isLoading:r}=N();return ur(),r?e.jsx(b,{container:!0,spacing:2,sx:{px:{xs:1,sm:2}},children:Array.from({length:12}).map((s,a)=>e.jsx(b,{size:{xs:12,sm:6,md:4,lg:3},children:e.jsxs(E,{sx:{minWidth:"200px",height:300,display:"flex",flexDirection:"column"},children:[e.jsx(x,{sx:{height:200,bgcolor:"grey.200"}}),e.jsxs(P,{sx:{flex:1},children:[e.jsx(x,{sx:{height:20,bgcolor:"grey.200",mb:1}}),e.jsx(x,{sx:{height:16,bgcolor:"grey.200",width:"60%"}})]})]})},a))}):!t||t.length===0?e.jsx(x,{sx:{textAlign:"center",py:4},children:e.jsx(u,{variant:"h6",color:"textSecondary",children:"No products found"})}):e.jsx(b,{container:!0,spacing:2,sx:{px:{xs:1,sm:2}},children:t.map(s=>e.jsx(b,{size:{xs:12,sm:6,md:4,lg:3},children:e.jsx(ze,{value:s,children:e.jsx(Zo,{})})},s.id))})},"ProductGrid"),Zo=n(()=>{const t=T(),r=ur(),{displayCurrency:s,convert:a}=ne();return t?e.jsxs(E,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:1,transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:r.shadows[4]},cursor:"pointer",p:{xs:1,sm:1}},onClick:n(()=>{window.location.href=`#/products/${t.id}`},"onClick"),children:[e.jsx(De,{component:"img",image:Array.isArray(t.image_url)?t.image_url.length>0?t.image_url[0]:"/placeholder-product.svg":t.image_url||"/placeholder-product.svg",alt:t.name,sx:{objectFit:"cover",bgcolor:"grey.100",height:200,display:"flex",alignItems:"center",justifyContent:"center",p:1},onError:n(o=>{o.target.src="/placeholder-product.svg"},"onError")}),e.jsxs(P,{sx:{flex:1,display:"flex",flexDirection:"column",gap:.5,pb:1},children:[e.jsx(u,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:"1rem",fontWeight:600,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.name}),e.jsxs(u,{variant:"h6",color:"primary",sx:{fontWeight:600,fontSize:"1.1rem",wordBreak:"break-word"},children:[de(a(t.price))," ",s]})]}),e.jsxs(xr,{sx:{pt:0,justifyContent:"space-between"},children:[e.jsxs(x,{children:[e.jsx(ke,{size:"small",component:"a",href:`#/products/${t.id}/show`,sx:{color:"info.main"},children:e.jsx(so,{fontSize:"small"})}),e.jsx(ke,{size:"small",component:"a",href:`#/products/${t.id}`,sx:{color:"primary.main"},children:e.jsx(oo,{fontSize:"small"})})]}),e.jsx(u,{variant:"caption",color:"textSecondary",children:new Date(t.created).toLocaleDateString()})]})]}):null},"ProductCard"),en=n(()=>{B();const t=lt(),r=U(),{setFilters:s,filterValues:a}=N(),[o,i]=f.useState([]),[c,d]=f.useState(!0),[m,l]=f.useState("");f.useEffect(()=>{n(async()=>{try{const{data:w}=await t.getList("categories",{pagination:{page:1,perPage:100},sort:{field:"name",order:"ASC"},filter:{}});i(w)}catch{r("Error loading categories",{type:"warning"})}finally{d(!1)}},"fetchCategories")()},[t,r]);const h=n(p=>{const y=a.category_id===p?void 0:p;s({...a,category_id:y},null)},"handleCategoryToggle"),j=n(p=>{const w=p.target.value;l(w),s({...a,q:w},null)},"handleSearchChange");return e.jsx(E,{sx:{order:-1,mr:{xs:0,md:2},mb:{xs:2,md:0},width:{xs:"100%",md:"16em"}},children:e.jsxs(P,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Filters"}),e.jsx(We,{fullWidth:!0,placeholder:"Search products...",value:m,onChange:j,size:"small",sx:{mb:3},InputProps:{startAdornment:e.jsx(Zs,{position:"start",children:e.jsx(eo,{sx:{color:"text.secondary"}})})}}),e.jsx(u,{variant:"subtitle2",sx:{mt:2,mb:1,display:"flex",alignItems:"center"},children:"ð·ï¸ CATEGORIES"}),c?e.jsx(u,{variant:"body2",color:"textSecondary",children:"Loading categories..."}):e.jsx(ir,{dense:!0,sx:{py:0},children:o.map(p=>e.jsx(cr,{disablePadding:!0,children:e.jsxs(lr,{onClick:n(()=>h(p.id),"onClick"),sx:{py:.5},children:[e.jsx(to,{sx:{minWidth:32},children:a.category_id===p.id&&e.jsx(ro,{fontSize:"small",color:"primary"})}),e.jsx(dr,{primary:p.name,primaryTypographyProps:{variant:"body2"}})]})},p.id))})]})})},"ProductFilters"),tn=n(()=>(J(t=>t.breakpoints.down("md")),e.jsxs(q,{children:[e.jsx(es,{fields:["name","price","created","updated"]}),e.jsx(Pe,{}),e.jsx(He,{})]})),"ListActions$1"),rn="db84fdke0",it="images",ct=`https://api.cloudinary.com/v1_1/${rn}/upload`,ue=n(async t=>{const r=new FormData;r.append("file",t),r.append("upload_preset",it);const s=await fetch(ct,{method:"POST",body:r});if(!s.ok)throw new Error("Failed to upload image to Cloudinary");return(await s.json()).secure_url},"uploadImageToCloudinary$1"),Ir=n(t=>{const{source:r,label:s}=t;T(t);const{field:a}=Vt({source:r}),o=n(async i=>{try{const c=await ue(i);a.onChange(c)}catch(c){console.error("Error uploading image:",c)}},"handleImageUpload");return e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,width:"100%"},children:[e.jsx(x,{sx:{flex:2},children:e.jsx(I,{source:r,label:s||"Image URL",fullWidth:!0,value:a.value||"",onChange:a.onChange})}),e.jsx(x,{sx:{flex:1,minWidth:180},children:e.jsx(he,{source:`_image_upload_${r}`,label:"Upload Image",onChange:n(i=>{i&&o(i)},"onChange"),children:e.jsx(H,{source:"src",title:"title"})})}),e.jsx(x,{sx:{width:100,height:100,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #eee",borderRadius:1,background:"#fafafa"},children:a.value&&typeof a.value=="string"&&e.jsx("img",{src:a.value,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})]})},"ImageUploadField"),Je=f.lazy(()=>_e(()=>import("./vendor-ue79-INe.js").then(t=>t.bz),__vite__mapDeps([0,1,2])).then(t=>({default:t.RichTextInput}))),sn=n(()=>{const t=O(),{defaultTitle:r}=Ve();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"ProductTitle$2"),on=n(()=>e.jsx(Ae,{title:e.jsx(sn,{}),children:e.jsxs(V,{sx:{maxWidth:"40em"},children:[e.jsx(I,{source:"name",validate:_(),fullWidth:!0}),e.jsx(I,{source:"name_la",label:"Name (Lao)",fullWidth:!0}),e.jsx(k,{sx:{my:.2}}),e.jsx(qe,{source:"price",validate:_(),min:0,step:.01,fullWidth:!0}),e.jsx(k,{sx:{my:.2}}),e.jsx(se,{source:"category_id",reference:"categories",children:e.jsx(Q,{source:"name",fullWidth:!0,validate:_()})}),e.jsx(k,{sx:{my:.2}}),e.jsx(Yt,{source:"image_url",label:"Image URLs",children:e.jsx(Kt,{inline:!0,children:e.jsx(Ir,{source:""})})}),e.jsx(k,{sx:{my:.2}}),e.jsxs("div",{style:{alignItems:"center",gap:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:8},children:e.jsx("button",{type:"button",onClick:n(async t=>{t.preventDefault();const r=document.createElement("input");r.type="file",r.accept="image/*",r.onchange=async()=>{if(r.files&&r.files[0])try{const s=await ue(r.files[0]);await navigator.clipboard.writeText(s),alert("Image link copied to clipboard!");const a=document.querySelector('[contenteditable="true"][role="textbox"]');if(a){const o=document.createElement("img");o.src=s,o.alt="uploaded image";const i=window.getSelection();if(i&&i.rangeCount>0){const c=i.getRangeAt(0);c.collapse(!1),c.insertNode(o),c.setStartAfter(o),c.setEndAfter(o),i.removeAllRanges(),i.addRange(c)}else a.appendChild(o);a.dispatchEvent(new Event("input",{bubbles:!0}))}}catch{alert("Failed to upload image")}},r.click()},"onClick"),style:{marginRight:8,cursor:"pointer",padding:"8px 16px",backgroundColor:"#3f51b5",color:"#fff",border:"none",borderRadius:"4px"},children:"Upload Image"})}),e.jsx(f.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Je,{source:"description",validate:_(),fullWidth:!0})})]}),e.jsx(k,{sx:{my:.2}}),e.jsx(f.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Je,{source:"description_la",label:"Description (Lao)",fullWidth:!0})}),e.jsx(k,{sx:{my:.2}}),e.jsx(f.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Je,{source:"details",fullWidth:!0})})]})}),"ProductEdit"),Ze=f.lazy(()=>_e(()=>import("./vendor-ue79-INe.js").then(t=>t.bz),__vite__mapDeps([0,1,2])).then(t=>({default:t.RichTextInput}))),nn=n(()=>{const t=O(),{defaultTitle:r}=Gt();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"ProductTitle$1"),an=n(()=>e.jsx($e,{title:e.jsx(nn,{}),children:e.jsxs(V,{sx:{maxWidth:"40em"},children:[e.jsx(I,{autoFocus:!0,source:"name",validate:_(),fullWidth:!0}),e.jsx(I,{source:"name_la",label:"Name (Lao)",fullWidth:!0}),e.jsx(k,{sx:{my:.2}}),e.jsx(qe,{source:"price",validate:_(),min:0,step:.01,fullWidth:!0}),e.jsx(k,{sx:{my:.2}}),e.jsx(se,{source:"category_id",reference:"categories",children:e.jsx(Q,{source:"name",fullWidth:!0,validate:_()})}),e.jsx(k,{sx:{my:.2}}),e.jsx(Yt,{source:"image_url",label:"Image URLs",children:e.jsx(Kt,{inline:!0,children:e.jsx(Ir,{source:""})})}),e.jsx(k,{sx:{my:.2}}),e.jsxs("div",{style:{alignItems:"center",gap:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:8},children:e.jsx("button",{type:"button",onClick:n(async t=>{t.preventDefault();const r=document.createElement("input");r.type="file",r.accept="image/*",r.onchange=async()=>{if(r.files&&r.files[0])try{const s=await ue(r.files[0]);await navigator.clipboard.writeText(s),alert("Image link copied to clipboard!");const a=document.querySelector('[contenteditable="true"][role="textbox"]');if(a){const o=document.createElement("img");o.src=s,o.alt="uploaded image";const i=window.getSelection();if(i&&i.rangeCount>0){const c=i.getRangeAt(0);c.collapse(!1),c.insertNode(o),c.setStartAfter(o),c.setEndAfter(o),i.removeAllRanges(),i.addRange(c)}else a.appendChild(o);a.dispatchEvent(new Event("input",{bubbles:!0}))}}catch{alert("Failed to upload image")}},r.click()},"onClick"),style:{marginRight:8,cursor:"pointer",padding:"8px 16px",backgroundColor:"#3f51b5",color:"#fff",border:"none",borderRadius:"4px"},children:"Upload Image"})}),e.jsx(f.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Ze,{source:"description",validate:_(),fullWidth:!0})})]}),e.jsx(k,{sx:{my:.2}}),e.jsx(f.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Ze,{source:"description_la",label:"Description (Lao)",fullWidth:!0})}),e.jsx(k,{sx:{my:.2}}),e.jsx(f.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Ze,{source:"details",fullWidth:!0})})]})}),"ProductCreate"),cn=n(()=>{const t=O(),{defaultTitle:r}=rs();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"ProductTitle"),ln=n(()=>{const t=T();if(!t)return null;const s=(Array.isArray(t.image_url)?t.image_url:[t.image_url]).filter(a=>a&&a.trim()!=="");return s.length===0?e.jsx(De,{component:"img",image:"/placeholder-product.svg",alt:t.name||"Product image",sx:{width:"100%",height:"auto",borderRadius:2,maxHeight:400,objectFit:"cover",bgcolor:"grey.100"}}):s.length===1?e.jsx(De,{component:"img",image:s[0],alt:t.name||"Product image",sx:{width:"100%",height:"auto",borderRadius:2,maxHeight:400,objectFit:"cover",bgcolor:"grey.100"},onError:n(a=>{a.target.src="/placeholder-product.svg"},"onError")}):e.jsx(co,{variant:"masonry",cols:2,gap:8,children:s.map((a,o)=>e.jsx(lo,{children:e.jsx(De,{component:"img",image:a,alt:`${t.name||"Product"} image ${o+1}`,sx:{width:"100%",height:"auto",borderRadius:2,objectFit:"cover",bgcolor:"grey.100"},onError:n(i=>{i.target.src="/placeholder-product.svg"},"onError")})},o))})},"ProductImage"),dn=n(()=>e.jsx(Ye,{title:e.jsx(cn,{}),children:e.jsx(x,{sx:{p:2},children:e.jsxs(b,{container:!0,spacing:3,children:[e.jsx(b,{size:{xs:12,md:5},children:e.jsx(E,{sx:{height:"fit-content"},children:e.jsx(P,{children:e.jsx(ln,{})})})}),e.jsx(b,{size:{xs:12,md:7},children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsxs(x,{sx:{mb:3},children:[e.jsx(D,{source:"name",sx:{"& .RaTextField-text":{fontSize:"2rem",fontWeight:600,color:"primary.main",mb:1}}}),e.jsx(D,{source:"name_la",label:"",sx:{"& .RaTextField-text":{fontSize:"1.2rem",color:"text.secondary",fontStyle:"italic"}}})]}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(gt,{color:"success",sx:{mr:1}}),e.jsx(ts,{source:"price",sx:{"& .RaNumberField-text":{fontSize:"1.5rem",fontWeight:600,color:"success.main"}}})]}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(no,{color:"primary",sx:{mr:1}}),e.jsx(R,{source:"category_id",reference:"categories",children:e.jsx(jt,{label:e.jsx(D,{source:"name"}),color:"primary",variant:"outlined"})})]}),e.jsx(k,{sx:{my:2}}),e.jsxs(x,{sx:{mb:2},children:[e.jsx(u,{variant:"h6",sx:{mb:1,color:"text.primary"},children:"Description"}),e.jsx(Ue,{source:"description",sx:{"& .RaTextField-text":{lineHeight:1.6,color:"text.secondary"}}}),e.jsx(x,{sx:{mt:1},children:e.jsx(Ue,{source:"description_la",label:"",sx:{"& .RaTextField-text":{lineHeight:1.6,color:"text.secondary",fontStyle:"italic"}}})})]}),e.jsxs(Ge,{sx:{p:2,backgroundColor:"grey.50"},children:[e.jsx(u,{variant:"h6",sx:{mb:2,color:"text.primary"},children:"Product Details"}),e.jsx(Ue,{source:"details",sx:{"& .RaRichTextField-root":{lineHeight:1.6}}})]}),e.jsx(k,{sx:{my:2}}),e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{size:{xs:6},children:e.jsxs(x,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ao,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(x,{children:[e.jsx(u,{variant:"caption",display:"block",color:"text.secondary",children:"Created"}),e.jsx(L,{source:"created"})]})]})}),e.jsx(b,{size:{xs:6},children:e.jsxs(x,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(io,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(x,{children:[e.jsx(u,{variant:"caption",display:"block",color:"text.secondary",children:"Updated"}),e.jsx(L,{source:"updated"})]})]})})]})]})})})]})})}),"ProductShow"),wt={list:Xo,create:an,edit:on,show:dn,icon:uo,recordRepresentation:n(t=>t.name||`Product ${t.id}`,"recordRepresentation")},un=n(()=>{const t=T(),r=B();return t?e.jsxs(oe,{size:"small",color:"primary",component:Ht,to:{pathname:"/products",search:Qt.stringify({filter:JSON.stringify({category_id:t.id})})},sx:{display:"inline-flex",alignItems:"center"},children:[e.jsx(wt.icon,{sx:{paddingRight:"0.5em"}}),r("resources.categories.fields.products")]}):null},"LinkToRelatedProducts"),xn=n(()=>{const t=O(),{defaultTitle:r}=N();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"CategoriesTitle"),hn=n(()=>e.jsx(q,{children:e.jsx(Pe,{})}),"CategoryListActions"),mn=n(()=>e.jsx(xe,{sort:{field:"name",order:"ASC"},perPage:20,pagination:!1,component:"div",actions:e.jsx(hn,{}),title:e.jsx(xn,{}),children:e.jsx(pn,{})}),"CategoryList"),pn=n(()=>{const{data:t,error:r,isPending:s}=N(),a=we(),o=Ke();return s||r?null:e.jsx(b,{container:!0,spacing:2,sx:{mt:0},children:t.map(i=>e.jsx(ze,{value:i,children:e.jsx(b,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsxs(E,{children:[e.jsxs(xo,{onClick:n(()=>{a(`/categories/${i.id}`),Qe.getState().setSelectImage(null),o()},"onClick"),children:[e.jsx(De,{image:`${i==null?void 0:i.image_url}`,sx:{height:140}}),e.jsx(P,{sx:{paddingBottom:"0.5em"},children:e.jsx(u,{variant:"h5",component:"h2",align:"center",children:ss.humanize(i.name)})})]}),e.jsxs(xr,{sx:{".MuiCardActions-spacing":{display:"flex",justifyContent:"space-around"}},children:[e.jsx(un,{}),e.jsx(Fe,{})]})]})},i.id)},i.id))})},"CategoryGrid"),gn=ft("img")({width:25,maxWidth:25,maxHeight:25,verticalAlign:"middle"}),jn=n(t=>{const r=T();return r?e.jsx(gn,{src:r.thumbnail,alt:""}):null},"ThumbnailField"),Oe=$.Col,fn=$.NumberCol,yn=n(t=>t!=null&&t.image_url?e.jsx(Ce,{src:t.image_url,alt:t.name,sx:{width:32,height:32}}):null,"ImageUrlField$1"),bn=n(()=>{const{displayCurrency:t,convert:r}=ne(),{selectImage:s,setSelectImage:a}=Qe(),o=Ke(),i=Ee();return f.useEffect(()=>{a(null),o()},[i.pathname,a]),e.jsx(Ae,{title:e.jsx(vn,{}),children:e.jsx(V,{children:e.jsxs(x,{display:"flex",flexDirection:"column",gap:2,width:"100%",maxWidth:600,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Edit Category Information"}),e.jsx(I,{source:"name",label:"Category Name"}),e.jsx(I,{source:"name_la",label:"Lao Name"}),e.jsx(he,{source:"image",label:"Category Image",onChange:n(c=>{a(c)},"onChange"),children:e.jsx(H,{source:"src",title:"title"})}),e.jsx(H,{source:"image_url",label:"Current Image",sx:{display:s!==null?"none":"block"}}),e.jsx(ce,{label:"resources.categories.fields.products",fullWidth:!0,children:e.jsx(os,{reference:"products",target:"category_id",perPage:20,children:e.jsxs($,{sx:{maxWidth:800,marginLeft:0,marginRight:"auto"},children:[e.jsx(Oe,{sx:{width:25,padding:0},field:jn,label:!1}),e.jsx(Oe,{source:"image_url",render:yn}),e.jsx(fn,{source:"name",options:{minimumFractionDigits:2}}),e.jsx(Oe,{label:"Price",render:n(c=>`$${Qo(r(c.price||0))} ${t}`,"render")}),e.jsx(Oe,{align:"right",children:e.jsx(Fe,{})})]})})})]})})})},"CategoryEdit"),vn=n(()=>{const t=O(),{defaultTitle:r}=Ve();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"CategoryTitle"),wn=n(()=>e.jsx($e,{title:e.jsx(Xt,{title:"Create New Category"}),children:e.jsx(V,{children:e.jsxs(x,{display:"flex",flexDirection:"column",gap:2,width:"100%",maxWidth:600,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"New Category Information"}),e.jsx(I,{source:"name",label:"Category Name",validate:[_()],fullWidth:!0}),e.jsx(I,{source:"name_la",label:"Lao Name",validate:[_()],fullWidth:!0}),e.jsx(he,{source:"image",label:"Category Image",children:e.jsx(H,{source:"src",title:"title"})})]})})}),"CategoryCreate"),Dr={list:mn,edit:bn,create:wn,icon:ho},et=n(({data:t})=>{if(!t||!t.items||t.items.length===0)return e.jsxs(E,{elevation:3,sx:{borderRadius:3,p:2},children:[e.jsx(nt,{title:"Pending Orders",titleTypographyProps:{fontWeight:"bold",fontSize:18}}),e.jsx(P,{children:e.jsx(u,{variant:"body2",color:"text.secondary",children:"No pending orders"})})]});const r=n(a=>{try{return ns(as(a),"MMM dd, yyyy HH:mm")}catch{return a}},"formatDate"),{currency:s}=ne();return e.jsxs(E,{sx:{borderRadius:"10px",p:2},children:[e.jsx(nt,{sx:{mt:-1},title:`Pending Orders (${t.totalItems})`,subheader:`Showing ${t.items.length} of ${t.totalItems} orders`,titleTypographyProps:{fontWeight:"bold",fontSize:18},subheaderTypographyProps:{color:"text.secondary"}}),e.jsx(P,{sx:{padding:0},children:e.jsx(x,{sx:{overflowX:"auto",maxWidth:630,mx:"auto"},children:e.jsx(yt,{children:e.jsxs(me,{size:"small",sx:{minWidth:"800px"},children:[e.jsx(Be,{children:e.jsxs(A,{children:[e.jsx(v,{children:"Reference ID"}),e.jsx(v,{children:"Customer"}),e.jsx(v,{children:"Quantity"}),e.jsx(v,{children:"Amount"}),e.jsx(v,{children:"Status"}),e.jsx(v,{children:"Created"})]})}),e.jsx(pe,{children:t.items.map((a,o)=>e.jsxs(A,{hover:!0,sx:{backgroundColor:o%2===0?"#fafafa":"inherit"},children:[e.jsx(v,{children:e.jsx(x,{children:e.jsx(u,{variant:"body2",fontWeight:"medium",children:a.referenceID})})}),e.jsx(v,{children:e.jsx(x,{display:"flex",flexDirection:"column",children:e.jsx(u,{variant:"body2",fontWeight:"medium",children:a.customerName})})}),e.jsx(v,{children:e.jsx(u,{variant:"body2",children:a.quantity})}),e.jsx(v,{children:e.jsx(x,{children:e.jsxs(u,{variant:"body2",fontWeight:"medium",children:[s==="USD"&&(a==null?void 0:a.amountUSD)&&`${de(Number(a==null?void 0:a.amountUSD))} $`,s==="THB"&&(a==null?void 0:a.amountTHB)&&`${de(Number(a==null?void 0:a.amountTHB))} à¸¿`,s==="LAK"&&(a==null?void 0:a.amountLAK)&&`${de(Number(a==null?void 0:a.amountLAK))} â­`]})})}),e.jsx(v,{children:e.jsx(jt,{label:a.status,color:a.status==="pending"?"warning":a.status==="completed"?"success":"default",size:"small",variant:"filled"})}),e.jsx(v,{children:e.jsx(u,{variant:"caption",color:"text.secondary",children:r(a.created)})})]},a.id))})]})})})})]})},"OrderPendingList"),Cn=n(({onFilterChange:t})=>{const[r,s]=f.useState(!1),[a,o]=f.useState(!1),[i,c]=f.useState(!1),[d,m]=f.useState(_t().subtract(30,"day")),[l,h]=f.useState(_t()),j=n(y=>{o(y),y&&c(!1),t({isYear:y?!1:i,...y?{}:{startDate:d==null?void 0:d.format("YYYY-MM-DD"),endDate:l==null?void 0:l.format("YYYY-MM-DD")}})},"handleMonthCheck"),p=n(y=>{c(y),y&&o(!1),t({isYear:!!y,...y?{}:{startDate:d==null?void 0:d.format("YYYY-MM-DD"),endDate:l==null?void 0:l.format("YYYY-MM-DD")}})},"handleYearCheck"),w=n(()=>{d&&l&&t({isYear:i,...!a&&!i?{startDate:d.format("YYYY-MM-DD"),endDate:l.format("YYYY-MM-DD")}:{}})},"handleDateChange");return re.useEffect(()=>{w()},[d,l,i,a]),e.jsx(hr,{dateAdapter:mr,children:e.jsxs(x,{sx:{position:"relative"},children:[e.jsx(ke,{onClick:n(()=>s(!r),"onClick"),sx:{color:"#666",border:"1px solid #e0e0e0",borderRadius:1,p:1},children:r?e.jsx(pr,{}):e.jsx(mo,{})}),e.jsx(gr,{in:r,children:e.jsxs(x,{sx:{position:"absolute",top:"100%",right:0,mt:1,p:2,bgcolor:"white",border:"1px solid #e0e0e0",borderRadius:2,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:320,zIndex:1e3},children:[e.jsx(u,{variant:"subtitle2",sx:{mb:2,fontWeight:600},children:"Filter Options"}),e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(It,{control:e.jsx(Dt,{checked:a,onChange:n(y=>j(y.target.checked),"onChange")}),label:"Month"}),e.jsx(It,{control:e.jsx(Dt,{checked:i,onChange:n(y=>p(y.target.checked),"onChange")}),label:"Year"}),e.jsx(u,{variant:"subtitle2",sx:{mt:2,mb:1,fontWeight:600},children:"Date Range"}),e.jsx(Lt,{label:"Start Date",value:d,onChange:n(y=>m(y),"onChange"),slotProps:{textField:{size:"small"}}}),e.jsx(Lt,{label:"End Date",value:l,onChange:n(y=>h(y),"onChange"),slotProps:{textField:{size:"small"}}})]})]})})]})})},"RevenueFilter"),tt=n(({data:t,onFilterChange:r,loading:s})=>{const{currency:a,displayCurrency:o}=ne(),i=re.useMemo(()=>!t||t.length===0?[]:t.map(l=>{const h=new Date(l.period),j=h.toLocaleDateString("en-US",{day:"2-digit"}),p=h.toLocaleDateString("en-US",{month:"short"});let w=0;switch(a){case"USD":w=Number.parseFloat(l.amountUSD);break;case"THB":w=Number.parseFloat(l.amountTHB);break;case"LAK":w=Number.parseFloat(l.amountLAK);break}return{date:`${j} ${p}`,amount:w}}),[t,a]),c=re.useMemo(()=>t.reduce((l,h)=>l+Number.parseFloat(h.amountLAK),0),[t]),d=re.useMemo(()=>t.reduce((l,h)=>l+Number.parseFloat(h.amountUSD),0),[t]),m=re.useMemo(()=>t.reduce((l,h)=>l+Number.parseFloat(h.amountTHB),0),[t]);return e.jsxs(E,{className:"w-full",children:[e.jsx(nt,{title:e.jsx(u,{variant:"h6",sx:{fontWeight:"bold",textAlign:"start"},children:"30 Day Revenue History"}),action:r&&e.jsx(Cn,{onFilterChange:r})}),e.jsxs(P,{children:[e.jsxs(x,{sx:{height:320,width:"100%",position:"relative"},children:[s&&e.jsx(x,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:e.jsx(jr,{})}),e.jsx(is,{width:"100%",height:"100%",children:e.jsxs(cs,{data:i,margin:{top:0,right:0,left:-10,bottom:10},children:[e.jsx(ls,{strokeDasharray:"3 3",stroke:"#f0f0f0",horizontal:!0,vertical:!1}),e.jsx(ds,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#666"},interval:"preserveStartEnd"}),e.jsx(us,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#666"},tickFormatter:n(l=>`${o}${l}`,"tickFormatter")}),e.jsx(xs,{type:"monotone",dataKey:"amount",stroke:"#D4A574",strokeWidth:3,dot:!1,activeDot:{r:4,fill:"#D4A574"}})]})})]}),e.jsxs(b,{container:!0,spacing:2,mt:1,children:[e.jsx(b,{size:{xs:12,md:4},children:e.jsxs(x,{sx:{textAlign:"center",p:2,backgroundColor:"#f9fafb",borderRadius:2},children:[e.jsx(u,{variant:"body2",color:"text.secondary",mb:1,children:"LAK"}),e.jsxs(u,{variant:"h6",color:"#a67c00",children:[c.toLocaleString()," â­"]})]})}),e.jsx(b,{size:{xs:12,md:4},children:e.jsxs(x,{sx:{textAlign:"center",p:2,backgroundColor:"#f9fafb",borderRadius:2},children:[e.jsx(u,{variant:"body2",color:"text.secondary",mb:1,children:"USD"}),e.jsxs(u,{variant:"h6",color:"#a67c00",children:["$",d.toFixed(2)]})]})}),e.jsx(b,{size:{xs:12,md:4},children:e.jsxs(x,{sx:{textAlign:"center",p:2,backgroundColor:"#f9fafb",borderRadius:2},children:[e.jsx(u,{variant:"body2",color:"text.secondary",mb:1,children:"THB"}),e.jsxs(u,{variant:"h6",color:"#a67c00",children:["à¸¿",m.toFixed(2)]})]})})]})]})]})},"SellRevenueChart"),ae=n(({title:t,value:r,icon:s})=>e.jsxs(E,{sx:{height:"100%",borderRadius:2,backgroundColor:"#fff",border:"1px solid #ece7df",boxShadow:"none",px:3,py:3,position:"relative",overflow:"hidden",display:"flex",alignItems:"center"},children:[e.jsx(x,{sx:{position:"absolute",left:-60,top:0,bottom:0,width:170,backgroundColor:"#fef1dc",borderTopRightRadius:100,borderBottomRightRadius:180}}),e.jsx(x,{sx:{position:"relative",width:48,height:48,minWidth:48,borderRadius:"50%",backgroundColor:"#fef1dc",color:"#D4AF37",display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,zIndex:1,ml:-1,mr:3,mt:1},children:s}),e.jsxs(x,{sx:{ml:5,flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(u,{variant:"body2",sx:{fontSize:"0.9rem",color:"#7b7462",fontWeight:500},children:t}),e.jsx(u,{variant:"h6",sx:{fontSize:"1.5rem",color:"#000",fontWeight:700},children:r})]})]}),"ModernStatusCard"),rt=n(({sellRevenue:t,orderStatusCount:r,customerCount:s})=>{const{currency:a}=ne();return e.jsxs(b,{container:!0,spacing:3,children:[e.jsx(b,{size:{xs:12,sm:6,lg:4},children:e.jsx(ae,{title:"Monthly Revenue",value:a==="USD"&&(t!=null&&t.amountUSD)?`${de(Number(t==null?void 0:t.amountUSD))} $`:a==="THB"&&(t!=null&&t.amountTHB)?`${de(Number(t==null?void 0:t.amountTHB))} à¸¿`:a==="LAK"&&(t!=null&&t.amountLAK)?`${de(Number(t==null?void 0:t.amountLAK))} â­`:"",icon:e.jsx(x,{children:e.jsx(gt,{sx:{fontSize:35}})}),color:"#607d8b",bgColor:"#607d8b"})}),e.jsx(b,{size:{xs:12,sm:6,lg:4},children:e.jsx(ae,{title:"Total Customers",value:s,icon:e.jsx(x,{children:e.jsx(po,{sx:{fontSize:35}})}),color:"#607d8b",bgColor:"#607d8b"})}),e.jsx(b,{size:{xs:12,sm:6,lg:4},children:e.jsx(ae,{title:"Pending Orders",value:r.pending,icon:e.jsx(x,{children:e.jsx(go,{sx:{fontSize:35}})}),color:"#090909",bgColor:"#ff9800"})}),e.jsx(b,{size:{xs:12,sm:6,lg:3},children:e.jsx(ae,{title:"Accepted Orders",value:r.accepted,icon:e.jsx(x,{sx:{fontSize:35},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"currentColor",children:[e.jsx("path",{d:"m16.414 10.979l-1.436-1.393l-2.88 2.97l-1.062-1.118l-1.45 1.377l2.498 2.63z"}),e.jsx("path",{fillRule:"evenodd",d:"M6 4a2 2 0 0 1 2-2h8.107l2.146 2.342L21 7.638V17a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2zm8.667 0H8v13h11V9h-2.333a2 2 0 0 1-2-2zm2 1.57l.08.088L17.865 7h-1.198z",clipRule:"evenodd"}),e.jsx("path",{d:"M5 5.5v1H3v-1zM16.5 22h-9c-1.026 0-2.13-.454-2.975-1.201C3.662 20.035 3 18.9 3 17.5v-11h2v11c0 .731.338 1.347.85 1.8c.53.47 1.176.7 1.65.7h9zm0-2h1v2h-1z"})]})})}),color:"#2196f3",bgColor:"#2196f3"})}),e.jsx(b,{size:{xs:12,sm:6,lg:3},children:e.jsx(ae,{title:"Orders Delivering",value:r.delivering,icon:e.jsx(x,{sx:{fontSize:35},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M21.5 2h-14v7.842a5 5 0 0 1 .94-.092h4.685a4.375 4.375 0 0 1 4.093 2.83l1.964-.452a4.06 4.06 0 0 1 2.318.088zm-9 2h4v4l-2-1.5l-2 1.5z"}),e.jsx("path",{fill:"currentColor",d:"m19.54 13.585l-3.553.817a2.87 2.87 0 0 0-.83-2.31a2.88 2.88 0 0 0-2.032-.842H8.439a3.25 3.25 0 0 0-2.301.948L4.086 14.25H0v7.25h11.373l6.197-1.55l3.74-1.594l.026-.014a2.555 2.555 0 0 0-1.797-4.757m-11.584-.24a1.3 1.3 0 0 1 .479-.095h4.69a.875.875 0 1 1 0 1.75H10v2h3.614l6.412-1.475l.02-.005a.556.556 0 0 1 .416 1.022L16.93 18.05l-5.803 1.45H5.5v-3.836l2.05-2.05a1.3 1.3 0 0 1 .406-.27M2 16.25h1.5v3.25H2z"})]})}),color:"#9c27b0",bgColor:"#9c27b0"})}),e.jsx(b,{size:{xs:12,sm:6,lg:3},children:e.jsx(ae,{title:"Completed Orders",value:r.completed,icon:e.jsx(x,{sx:{fontSize:35},children:e.jsx(jo,{fontSize:"inherit"})}),color:"#4caf50",bgColor:"#4caf50"})}),e.jsx(b,{size:{xs:12,sm:6,lg:3},children:e.jsx(ae,{title:"Cancelled Orders",value:r.cancel,icon:e.jsx(x,{sx:{fontSize:35},children:e.jsx(fo,{fontSize:"inherit"})}),color:"#f44336",bgColor:"#f44336"})})]})},"StatusCountCards"),_n=n(()=>{const[t,r]=f.useState({statusCount:null,orderList:null,loading:!0,error:null});return f.useEffect(()=>{n(async()=>{try{r(i=>({...i,loading:!0,error:null}));const[a,o]=await Promise.all([g.send("/dashboard/status-count",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g.authStore.token}`}}),g.send("/order-list?page=1&perPage=10&status=pending",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g.authStore.token}`}})]);r({statusCount:a,orderList:o,loading:!1,error:null})}catch(a){console.error("Error fetching static dashboard data:",a),r(o=>({...o,loading:!1,error:a instanceof Error?a.message:"Failed to fetch static dashboard data"}))}},"fetchStaticDashboardData")()},[]),t},"useStaticDashboardData"),Sn=n(t=>{const[r,s]=f.useState({sellRevenue:null,loading:!0,error:null});return f.useEffect(()=>{n(async()=>{try{s(d=>({...d,loading:!0,error:null}));const o=new URLSearchParams;(t==null?void 0:t.isYear)!==void 0&&o.append("isYear",t.isYear.toString()),t!=null&&t.startDate&&o.append("startDate",t.startDate),t!=null&&t.endDate&&o.append("endDate",t.endDate);const i=`/dashboard/sell-revenue${o.toString()?`?${o.toString()}`:""}`,c=await g.send(i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g.authStore.token}`}});s({sellRevenue:c.sell,loading:!1,error:null})}catch(o){console.error("Error fetching revenue data:",o),s(i=>({...i,loading:!1,error:o instanceof Error?o.message:"Failed to fetch revenue data"}))}},"fetchRevenueData")()},[t==null?void 0:t.isYear,t==null?void 0:t.startDate,t==null?void 0:t.endDate]),r},"useRevenueData"),W={flex:{display:"flex"},flexColumn:{display:"flex",flexDirection:"column"},leftCol:{flex:1,marginRight:"0.5em"},rightCol:{flex:1,marginLeft:"0.5em"},singleCol:{marginTop:"1em",marginBottom:"1em"}},Tn=n(()=>{const t=J(C=>C.breakpoints.down("sm")),r=J(C=>C.breakpoints.down("lg")),[s,a]=f.useState({isYear:!1,startDate:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),{statusCount:o,orderList:i,loading:c,error:d}=_n(),{sellRevenue:m,loading:l,error:h}=Sn(s),j=c,p=d||h,w=n(C=>{a(C)},"handleFilterChange");if(j)return e.jsx(x,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(jr,{})});if(p)return e.jsx(x,{p:2,children:e.jsx(at,{severity:"error",sx:{mb:2},children:p})});const y=n(C=>C.reduce((Y,F)=>(Y.totalLAK+=parseFloat(F.amountLAK),Y.totalTHB+=parseFloat(F.amountTHB),Y.totalUSD+=parseFloat(F.amountUSD),Y),{totalLAK:0,totalTHB:0,totalUSD:0}),"sumSellRevenue");return t?e.jsx(x,{sx:{p:2},children:e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2},children:[o&&e.jsx(rt,{sellRevenue:y,orderStatusCount:o.orderStatusCount,customerCount:o.customerCount,sellAmount:o.sellAmount}),m&&e.jsx(tt,{data:m,onFilterChange:w,loading:l}),i&&e.jsx(et,{data:i})]})}):r?e.jsxs("div",{style:W.flexColumn,children:[o&&e.jsx("div",{style:W.singleCol,children:e.jsx(rt,{sellRevenue:y,orderStatusCount:o.orderStatusCount,customerCount:o.customerCount,sellAmount:o.sellAmount})}),m&&e.jsx("div",{style:W.singleCol,children:e.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(tt,{data:m,onFilterChange:w,loading:l})})})}),i&&e.jsx("div",{style:W.singleCol,children:e.jsx(et,{data:i})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:W.singleCol,children:o&&e.jsx(rt,{sellRevenue:m==null?void 0:m[0],orderStatusCount:o.orderStatusCount,customerCount:o.customerCount,sellAmount:o.sellAmount})}),e.jsxs("div",{style:W.flex,children:[e.jsx("div",{style:W.leftCol,children:m&&e.jsx("div",{style:W.singleCol,children:e.jsx(tt,{data:m,onFilterChange:w,loading:l})})}),e.jsx("div",{style:W.rightCol,children:i&&e.jsx("div",{style:W.singleCol,children:e.jsx(et,{data:i})})})]})]})},"Dashboard$1"),In=Tn,At="http://localhost:8080",$t={getList:n(async(t,r)=>{if(t!=="orders")throw new Error(`Unknown resource: ${t}`);const{page:s=1,perPage:a=25}=r.pagination||{},{status:o}=r.filter||{},i="/order-list";try{const c=new URLSearchParams({page:s.toString(),perPage:a.toString(),...o&&{status:o}}),m=await g.send(`${i}?${c}`,{method:"GET"});return{data:m.items,total:m.totalItems,pageInfo:{hasNextPage:m.page<m.totalPages,hasPreviousPage:m.page>1}}}catch(c){throw console.error("Error fetching orders:",c),c}},"getList"),getOne:n(async(t,r)=>{if(t!=="orders")throw new Error(`Unknown resource: ${t}`);const s=await fetch(`${At}/order-list?perPage=1000`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g.authStore.token}`}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=(await s.json()).items.find(i=>i.id===r.id.toString());if(!o)throw new Error(`Order with id ${r.id} not found`);return{data:o}},"getOne"),getMany:n(async(t,r)=>{if(t!=="orders")throw new Error(`Unknown resource: ${t}`);const s=await fetch(`${At}/order-list?perPage=1000`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g.authStore.token}`}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return{data:(await s.json()).items.filter(i=>r.ids.includes(i.id.toString()))}},"getMany"),create:n(async()=>{throw new Error("Create operation not supported for orders")},"create"),update:n(async()=>{throw new Error("Update operation not supported for orders")},"update"),delete:n(async()=>{throw new Error("Delete operation not supported for orders")},"delete"),deleteMany:n(async()=>{throw new Error("Delete many operation not supported for orders")},"deleteMany"),updateMany:n(async()=>{throw new Error("Update many operation not supported for orders")},"updateMany"),getManyReference:n(async()=>{throw new Error("Get many reference operation not supported for orders")},"getManyReference")},fe={async getList(t=1,r=10,s="-created",a=""){const o={page:t,perPage:r,sort:s};a&&(o.filter=a);const i=await g.collection("blogs").getList(t,r,o);return{data:i.items,total:i.totalItems}},async getOne(t){return await g.collection("blogs").getOne(t)},async create(t){return await g.collection("blogs").create(t)},async update(t,r){return await g.collection("blogs").update(t,r)},async delete(t){return await g.collection("blogs").delete(t),{id:t}},async deleteMany(t){const r=[];for(const s of t)try{await g.collection("blogs").delete(s),r.push(s)}catch(a){console.error(`Failed to delete blog ${s}:`,a)}return{ids:r}}},Ft={getList:n(async(t,r)=>{if(t!=="blogs")return{data:[],total:0};const{page:s,perPage:a}=r.pagination||{page:1,perPage:25},{field:o,order:i}=r.sort||{},{filter:c}=r;let d="";o&&i&&(d=i==="ASC"?o:`-${o}`);let m="";if(c){const h=[];c.title&&h.push(`title ~ "${c.title}"`),c.description&&h.push(`description ~ "${c.description}"`),c.q&&h.push(`(title ~ "${c.q}" || description ~ "${c.q}")`),m=h.join(" && ")}const l=await fe.getList(s,a,d,m);return{data:l.data,total:l.total}},"getList"),getOne:n(async(t,r)=>t!=="blogs"?{data:{}}:{data:await fe.getOne(String(r.id))},"getOne"),create:n(async(t,r)=>{if(t!=="blogs")return{data:{}};const{image:s,...a}=r.data;return{data:await fe.create({...a,image_url:s&&s.rawFile?await ue(s.rawFile):""})}},"create"),update:n(async(t,r)=>{if(t!=="blogs")return{data:{}};const{image:s,...a}=r.data;let o=a.image_url;s&&s.rawFile?o=await ue(s.rawFile):s===null&&(o="");const i={...a,image_url:o};return{data:await fe.update(String(r.id),i)}},"update"),delete:n(async(t,r)=>t!=="blogs"?{data:{}}:(await fe.delete(String(r.id)),{data:{id:r.id}}),"delete"),deleteMany:n(async(t,r)=>t!=="blogs"?{data:[]}:{data:(await fe.deleteMany(r.ids.map(String))).ids},"deleteMany")},ye=n(t=>(t.avatar&&t.avatar,t),"transformCustomer"),Rt={getList:n(async(t,r)=>{const{page:s,perPage:a}=r.pagination||{page:1,perPage:10},{field:o,order:i}=r.sort||{field:"id",order:"ASC"},{q:c,...d}=r.filter;try{let m="";const l=[];c&&l.push(`(name ~ "${c}" || email ~ "${c}" || username ~ "${c}")`),Object.entries(d).forEach(([j,p])=>{p!=null&&p!==""&&(j==="has_ordered"?p===!0?l.push('id IN (SELECT DISTINCT customer_id FROM orders WHERE customer_id != "")'):l.push('id NOT IN (SELECT DISTINCT customer_id FROM orders WHERE customer_id != "")'):j==="customer_id"?l.push(`id = "${p}"`):typeof p=="boolean"?l.push(`${j} = ${p}`):typeof p=="string"?l.push(`${j} ~ "${p}"`):l.push(`${j} = ${p}`))}),l.length>0&&(m=l.join(" && "));const h=await g.collection("customers").getList(s,a,{sort:i==="ASC"?`+${o}`:`-${o}`,filter:m||void 0});return{data:h.items.map(ye),total:h.totalItems}}catch(m){throw console.error("Error fetching customers:",m),m}},"getList"),getOne:n(async(t,r)=>{try{const s=await g.collection("customers").getOne(r.id.toString(),{expand:"address_id,address_id.province_id,address_id.district_id"});return{data:ye(s)}}catch(s){throw console.error("Error fetching customer:",s),s}},"getOne"),create:n(async(t,r)=>{try{const s=await g.collection("customers").create(r.data);return{data:ye(s)}}catch(s){throw console.error("Error creating customer:",s),s}},"create"),update:n(async(t,r)=>{try{const s=await g.collection("customers").update(r.id,r.data);return{data:ye(s)}}catch(s){throw console.error("Error updating customer:",s),s}},"update"),delete:n(async(t,r)=>{try{return await g.collection("customers").delete(r.id.toString()),{data:{id:r.id}}}catch(s){throw console.error("Error deleting customer:",s),s}},"delete"),deleteMany:n(async(t,r)=>{try{return await Promise.all(r.ids.map(s=>g.collection("customers").delete(s.toString()))),{data:r.ids}}catch(s){throw console.error("Error deleting customers:",s),s}},"deleteMany"),getMany:n(async(t,r)=>{try{return{data:(await Promise.all(r.ids.map(a=>g.collection("customers").getOne(a.toString())))).map(ye)}}catch(s){throw console.error("Error fetching customers:",s),s}},"getMany"),getManyReference:n(async(t,r)=>{const{page:s,perPage:a}=r.pagination||{page:1,perPage:10},{field:o,order:i}=r.sort||{field:"id",order:"ASC"},{target:c,id:d}=r;try{const m=`${c} = "${d}"`,l=await g.collection("customers").getList(s,a,{sort:i==="ASC"?`+${o}`:`-${o}`,filter:m});return{data:l.items.map(ye),total:l.totalItems}}catch(m){throw console.error("Error fetching customers reference:",m),m}},"getManyReference")},Bt={getList:n(async(t,r)=>{const{pagination:s,sort:a,filter:o}=r,{page:i,perPage:c}=s,{field:d,order:m}=a;let l="";const h=[];o.q&&h.push(`(name ~ "${o.q}" || description ~ "${o.q}" || name_la ~ "${o.q}" || description_la ~ "${o.q}")`),o.category_id&&h.push(`category_id = "${o.category_id}"`),o.price_gte&&h.push(`price >= ${o.price_gte}`),o.price_lte&&h.push(`price <= ${o.price_lte}`);const j=[];o.stock_out&&j.push("stock = 0"),o.stock_low&&j.push("(stock >= 1 && stock <= 9)"),o.stock_medium&&j.push("(stock >= 10 && stock <= 49)"),o.stock_high&&j.push("stock >= 50"),j.length>0&&h.push(`(${j.join(" || ")})`);const p=[];o.sales_best&&p.push("sales_count > 100"),o.sales_average&&p.push("(sales_count >= 10 && sales_count <= 100)"),o.sales_low&&p.push("(sales_count >= 1 && sales_count < 10)"),o.sales_never&&p.push("sales_count = 0"),p.length>0&&h.push(`(${p.join(" || ")})`),h.length>0&&(l=h.join(" && "));const w=`${m==="DESC"?"-":""}${d}`;try{const y=await g.collection("products").getList(i,c,{filter:l,sort:w,expand:"category_id"});return{data:y.items,total:y.totalItems}}catch(y){throw console.error("Error fetching products:",y),new Error("Failed to fetch products")}},"getList"),getOne:n(async(t,r)=>{try{return{data:await ve("products",r.id)}}catch(s){throw console.error("Error fetching product:",s),new Error("Failed to fetch product")}},"getOne"),getMany:n(async(t,r)=>{try{const s=r.ids.map(o=>`id = "${o}"`).join(" || ");return{data:(await g.collection("products").getList(1,r.ids.length,{filter:s})).items}}catch(s){throw console.error("Error fetching products:",s),new Error("Failed to fetch products")}},"getMany"),getManyReference:n(async(t,r)=>{const{target:s,id:a,pagination:o,sort:i,filter:c}=r,{page:d,perPage:m}=o,{field:l,order:h}=i,j=[`${s} = "${a}"`];c.q&&j.push(`(name ~ "${c.q}" || description ~ "${c.q}")`);const p=j.join(" && "),w=`${h==="DESC"?"-":""}${l}`;try{const y=await g.collection("products").getList(d,m,{filter:p,sort:w});return{data:y.items,total:y.totalItems}}catch(y){throw console.error("Error fetching related products:",y),new Error("Failed to fetch related products")}},"getManyReference"),create:n(async(t,r)=>{try{const s=await Yo("products",r.data);return{data:await ve("products",s)}}catch(s){throw console.error("Error creating product:",s),new Error("Failed to create product")}},"create"),update:n(async(t,r)=>{const{id:s,data:a}=r;try{return await Et("products",s,a),{data:await ve("products",s)}}catch(o){throw console.error("Error updating product:",o),new Error("Failed to update product")}},"update"),updateMany:n(async(t,r)=>{const{ids:s,data:a}=r;try{return await Promise.all(s.map(o=>Et("products",o,a))),{data:s}}catch(o){throw console.error("Error updating products:",o),new Error("Failed to update products")}},"updateMany"),delete:n(async(t,r)=>{const{id:s}=r;try{const a=await ve("products",s);return await Pt("products",s),{data:a}}catch(a){throw console.error("Error deleting product:",a),new Error("Failed to delete product")}},"delete"),deleteMany:n(async(t,r)=>{const{ids:s}=r;try{return await Promise.all(s.map(a=>Pt("products",a))),{data:s}}catch(a){throw console.error("Error deleting products:",a),new Error("Failed to delete products")}},"deleteMany")},ee="product_categories",Ot={getList:n(async(t,r)=>{const{page:s,perPage:a}=r.pagination||{page:1,perPage:10},{field:o,order:i}=r.sort||{field:"id",order:"ASC"},c=r.filter||{},m=await g.collection(ee).getList(s,a,{sort:`${i==="ASC"?"+":"-"}${o}`,filter:Object.keys(c||{}).map(l=>`${l} ~ "${c[l]}"`).join(" && ")});return{data:m.items.map(l=>({...l,id:l.id.toString(),name:l.name})),total:m.totalItems}},"getList"),getOne:n(async(t,r)=>{const s=await ve(ee,r.id.toString());return{data:{...s,id:s.id.toString(),name:s.name}}},"getOne"),getMany:n(async(t,r)=>{try{return{data:await Promise.all(r.ids.map(a=>ve(ee,String(a))))}}catch(s){throw console.error("Error fetching multiple product categories:",s),s}},"getMany"),create:n(async(t,r)=>{const{image:s,...a}=r.data;if(s&&s.rawFile){const o=new FormData;o.append("file",s.rawFile),o.append("upload_preset",it);const c=await(await fetch(ct,{method:"POST",body:o})).json();return{data:await g.collection(ee).create({...a,image_url:c.secure_url})}}else return{data:await g.collection(ee).create(a)}},"create"),update:n(async(t,r)=>{const{id:s,data:a}=r,{image:o,...i}=a;if(o&&o.rawFile){const c=new FormData;c.append("file",o.rawFile),c.append("upload_preset",it);const m=await(await fetch(ct,{method:"POST",body:c})).json();return{data:await g.collection(ee).update(s,{...i,image_url:m.secure_url})}}else return{data:await g.collection(ee).update(s,i)}},"update"),delete:n(async(t,r)=>(await g.collection(ee).delete(r.id.toString()),{data:{id:r.id}}),"delete")},Dn="images",Ln="https://api.cloudinary.com/v1_1/db84fdke0/upload",Mt=n(async t=>{const r=new FormData;r.append("file",t),r.append("upload_preset",Dn);const s=await fetch(Ln,{method:"POST",body:r});if(!s.ok)throw new Error("Failed to upload image to Cloudinary");return(await s.json()).secure_url},"uploadImageToCloudinary"),Ut={getList:n(async(t,r)=>{const{page:s,perPage:a}=r.pagination||{page:1,perPage:10},{field:o,order:i}=r.sort||{field:"id",order:"ASC"},{q:c,...d}=r.filter;try{let m="";const l=[];c&&l.push(`(full_name ~ "${c}" || email ~ "${c}" || username ~ "${c}")`),Object.entries(d).forEach(([j,p])=>{p!=null&&p!==""&&(typeof p=="boolean"?l.push(`${j} = ${p}`):typeof p=="string"?l.push(`${j} ~ "${p}"`):l.push(`${j} = ${p}`))}),l.length>0&&(m=l.join(" && "));const h=await g.collection("users").getList(s,a,{sort:i==="ASC"?`+${o}`:`-${o}`,filter:m||void 0});return{data:h.items,total:h.totalItems}}catch(m){throw console.error("Error fetching users:",m),m}},"getList"),getOne:n(async(t,r)=>{try{return{data:await g.collection("users").getOne(r.id.toString())}}catch(s){throw console.error("Error fetching user:",s),s}},"getOne"),create:n(async(t,r)=>{try{const{password:s,passwordConfirm:a,avatar:o,...i}=r.data;let c="";o&&o.rawFile&&(c=await Mt(o.rawFile));const d={...i,emailVisibility:!0,password:s,passwordConfirm:a,avatar:c},m=await g.collection("users").create(d);return await g.collection("users").requestVerification(i.email),{data:m}}catch(s){throw console.error("Error creating user:",s),s}},"create"),update:n(async(t,r)=>{try{const{id:s,data:a}=r,{password:o,oldPassword:i,passwordConfirm:c,avatar:d,email:m,...l}=a,h=await g.collection("users").getOne(s);if(o){if(!i)throw new Error("Old password is required to change the password.");await g.collection("users").update(s,{password:o,passwordConfirm:c,oldPassword:i})}m!==h.email&&await g.collection("users").update(s,{email:m});const j=new FormData;for(const w in l)Object.prototype.hasOwnProperty.call(l,w)&&j.append(w,l[w]);if(j.append("emailVisibility","true"),d&&d.rawFile){const w=await Mt(d.rawFile);j.append("avatar",w)}else d===null?j.append("avatar",""):typeof d=="string"&&d!==h.avatar&&j.append("avatar",d);return{data:{...await g.collection("users").update(s,j),id:s}}}catch(s){throw console.error("Error updating user:",s),s}},"update"),delete:n(async(t,r)=>{try{return await g.collection("users").delete(r.id.toString()),{data:{id:r.id}}}catch(s){throw console.error("Error deleting user:",s),s}},"delete"),deleteMany:n(async(t,r)=>{try{return await Promise.all(r.ids.map(s=>g.collection("users").delete(s.toString()))),{data:r.ids}}catch(s){throw console.error("Error deleting users:",s),s}},"deleteMany"),getMany:n(async(t,r)=>{try{return{data:await Promise.all(r.ids.map(a=>g.collection("users").getOne(a.toString())))}}catch(s){throw console.error("Error fetching users:",s),s}},"getMany"),getManyReference:n(async(t,r)=>{const{page:s,perPage:a}=r.pagination||{page:1,perPage:10},{field:o,order:i}=r.sort||{field:"id",order:"ASC"},{target:c,id:d}=r;try{const m=`${c} = "${d}"`,l=await g.collection("users").getList(s,a,{sort:i==="ASC"?`+${o}`:`-${o}`,filter:m});return{data:l.items,total:l.totalItems}}catch(m){throw console.error("Error fetching users reference:",m),m}},"getManyReference")},kn=hs("http://localhost:4000"),Nt={...kn},En=n(t=>{const r=Pn();return new Proxy(An,{get(a,o){return o==="supportAbortSignal"?!0:(i,c)=>i==="orders"&&$t[o.toString()]?$t[o.toString()](i,c):i==="blogs"&&Ft[o.toString()]?Ft[o.toString()](i,c):i==="customers"&&Rt[o.toString()]?Rt[o.toString()](i,c):i==="products"&&Bt[o.toString()]?Bt[o.toString()](i,c):(i==="product_categories"||i==="categories")&&Ot[o.toString()]?Ot[o.toString()](i,c):i==="users"&&Ut[o.toString()]?Ut[o.toString()](i,c):i==="addresses"&&Nt[o.toString()]?Nt[o.toString()](i,c):r.then(d=>d[o.toString()](i,c))}})},"dataProviderFactory"),Pn=n(async t=>_e(()=>import("./rest-D4Y_ACcK.js"),__vite__mapDeps([3,0,1,2])).then(r=>r.default),"getDataProvider"),An={create:n(()=>Promise.resolve({data:{id:0}}),"create"),delete:n(()=>Promise.resolve({data:{}}),"delete"),deleteMany:n(()=>Promise.resolve({}),"deleteMany"),getList:n(()=>Promise.resolve({data:[],total:0}),"getList"),getMany:n(()=>Promise.resolve({data:[]}),"getMany"),getManyReference:n(()=>Promise.resolve({data:[],total:0}),"getManyReference"),getOne:n(()=>Promise.resolve({data:{}}),"getOne"),update:n(()=>Promise.resolve({data:{}}),"update"),updateMany:n(()=>Promise.resolve({}),"updateMany")},$n={...ms,pos:{search:"Search",configuration:"Configuration",language:"Language",theme:{name:"Theme",light:"Light",dark:"Dark"},dashboard:{monthly_revenue:"Monthly Revenue"},orders_management:"Orders Management",month_history:"30 Day Revenue History",new_orders:"New Orders",pending_reviews:"Pending Reviews",all_reviews:"See all reviews",new_customers:"New Customers",all_customers:"See all customers",pending_orders:"Pending Orders",order:{items:"by %{customer_name}, one item |||| by %{customer_name}, %{nb_items} items"},welcome:{title:"Welcome to the react-admin e-commerce demo",subtitle:"This is the admin of an imaginary poster shop. Feel free to explore and modify the data - it's local to your computer, and will reset each time you reload.",ra_button:"react-admin site",demo_button:"Source for this demo"}},menu:{sales:"Sales",catalog:"Catalog",customers:"Customers"},events:{review:{title:'Posted review on "%{product}"'},order:{title:"Ordered 1 poster |||| Ordered %{smart_count} posters"}},resources:{customers:{name:"Customer |||| Customers",fields:{orders:"Orders",first_seen:"First seen",full_name:"Name",groups:"Segments",last_seen:"Last seen",last_seen_gte:"Visited Since",name:"Name",total_spent:"Total spent",password:"Password",confirm_password:"Confirm password",stateAbbr:"State"},filters:{last_visited:"Last visited",today:"Today",this_week:"This week",last_week:"Last week",this_month:"This month",last_month:"Last month",earlier:"Earlier",has_ordered:"Has ordered",has_newsletter:"Has newsletter",group:"Segment"},fieldGroups:{identity:"Identity",address:"Address",stats:"Stats",history:"History",password:"Password",change_password:"Change Password"},page:{delete:"Delete Customer"},errors:{password_mismatch:"The password confirmation is not the same as the password."},notifications:{created:"Customer created |||| %{smart_count} customers created",updated:"Customer updated |||| %{smart_count} customers updated",deleted:"Customer deleted |||| %{smart_count} customers deleted"}},orders:{name:"Order |||| Orders",amount:"1 order |||| %{smart_count} orders",title:"Order %{reference}",fields:{basket:{delivery:"Delivery",reference:"Reference",quantity:"Quantity",sum:"Sum",tax_rate:"Tax Rate",taxes:"Tax",total:"Total",unit_price:"Unit Price"},address:"Address",customer_id:"Customer",date_gte:"Passed Since",date_lte:"Passed Before",nb_items:"Nb Items",total_gte:"Min amount",status:"Status",returned:"Returned"},section:{order:"Order",customer:"Customer",shipping_address:"Shipping Address",items:"Items",total:"Totals"},notifications:{created:"Order created |||| %{smart_count} orders created",updated:"Order updated |||| %{smart_count} orders updated",deleted:"Order deleted |||| %{smart_count} orders deleted"}},blogs:{name:"Blog |||| Blogs"},users:{name:"User admin |||| User admin",fields:{full_name:"Full Name",username:"Username",email:"Email",phone_number:"Phone Number",verified:"Verified",emailVisibility:"Email Visibility",password:"Password",passwordConfirm:"Confirm Password"}},invoices:{name:"Invoice |||| Invoices",fields:{date:"Invoice date",customer_id:"Customer",order_id:"Order",date_gte:"Passed Since",date_lte:"Passed Before",total_gte:"Min amount",address:"Address"},notifications:{created:"Invoice created |||| %{smart_count} invoices created",updated:"Invoice updated |||| %{smart_count} invoices updated",deleted:"Invoice deleted |||| %{smart_count} invoices deleted"}},products:{name:"Products |||| Products",fields:{category_id:"Category",height_gte:"Min height",height_lte:"Max height",height:"Height",image:"Image",price:"Price",reference:"Reference",sales:"Sales",stock_lte:"Low Stock",stock:"Stock",thumbnail:"Thumbnail",width_gte:"Min width",width_lte:"Max width",width:"Width"},tabs:{image:"Image",details:"Details",description:"Description",reviews:"Reviews"},filters:{categories:"Categories",stock:"Stock",no_stock:"Out of stock",low_stock:"1 - 9 items",average_stock:"10 - 49 items",enough_stock:"50 items & more",sales:"Sales",best_sellers:"Best sellers",average_sellers:"Average",low_sellers:"Low",never_sold:"Never sold"},notifications:{created:"Poster created |||| %{smart_count} posters created",updated:"Poster updated |||| %{smart_count} posters updated",deleted:"Poster deleted |||| %{smart_count} posters deleted"}},categories:{name:"Category |||| Categories",fields:{products:"Products"},notifications:{created:"Category created |||| %{smart_count} categories created",updated:"Category updated |||| %{smart_count} categories updated",deleted:"Category deleted |||| %{smart_count} categories deleted"}},reviews:{name:"Review |||| Reviews",amount:"1 review |||| %{smart_count} reviews",relative_to_poster:"Review on poster",detail:"Review detail",fields:{customer_id:"Customer",order_id:"Order",product_id:"Product",date_gte:"Posted since",date_lte:"Posted before",date:"Date",comment:"Comment",rating:"Rating"},action:{accept:"Accept",reject:"Reject"},notifications:{created:"Review created |||| %{smart_count} reviews created",updated:"Review updated |||| %{smart_count} reviews updated",deleted:"Review deleted |||| %{smart_count} reviews deleted",approved_success:"Review approved",approved_error:"Error: Review not approved",rejected_success:"Review rejected",rejected_error:"Error: Review not rejected"}},segments:{name:"Segment |||| Segments",fields:{customers:"Customers",name:"Name"},data:{compulsive:"Compulsive",collector:"Collector",ordered_once:"Ordered once",regular:"Regular",returns:"Returns",reviewer:"Reviewer"}}}},Lr=n(({size:t="25",sx:r})=>{const s=T();return s?e.jsx(Ce,{src:`${s.avatar}?size=${t}x${t}`,style:{width:parseInt(t,10),height:parseInt(t,10)},sx:r,alt:`${s.first_name} ${s.last_name}`}):null},"AvatarField$2"),Fn=n(t=>{const{size:r}=t,s=T();return s?e.jsxs(u,{variant:"body2",component:"div",sx:[{display:"flex",flexWrap:"nowrap",alignItems:"center"},...Array.isArray(t.sx)?t.sx:[t.sx]],children:[e.jsx(Lr,{record:s,size:r,sx:{mr:1,mt:-.5,mb:-.5,textDecoration:"underline",textDecorationColor:"#bdbdbd"}}),s.first_name," ",s.last_name]}):null},"FullNameField"),kr=f.memo(Fn),Rn=n(()=>{const t=T();return t?e.jsxs("span",{children:[t.address,", ",t.city,", ",t.stateAbbr," ",t.zipcode]}):null},"AddressField$1"),z=ft(v)({textAlign:"right"}),Er=n(()=>{const t=T(),r=B(),s=t?t.basket.map(c=>c.product_id):[],{isPending:a,data:o}=ps("products",{ids:s},{enabled:!!t}),i=o?o.reduce((c,d)=>(c[d.id]=d,c),{}):{};return a||!t||!o?null:e.jsxs(me,{children:[e.jsx(Be,{children:e.jsxs(A,{children:[e.jsx(v,{children:r("resources.orders.fields.basket.reference")}),e.jsx(z,{children:r("resources.orders.fields.basket.unit_price")}),e.jsx(z,{children:r("resources.orders.fields.basket.quantity")}),e.jsx(z,{children:r("resources.orders.fields.basket.total")})]})}),e.jsx(pe,{children:t.basket.map(c=>e.jsxs(A,{children:[e.jsx(v,{children:e.jsx(dt,{to:`/products/${c.product_id}`,children:i[c.product_id].reference})}),e.jsx(z,{children:i[c.product_id].price.toLocaleString(void 0,{style:"currency",currency:"USD"})}),e.jsx(z,{children:c.quantity}),e.jsx(z,{children:(i[c.product_id].price*c.quantity).toLocaleString(void 0,{style:"currency",currency:"USD"})})]},c.product_id))})]})},"Basket"),Bn=n(()=>{const t=T();return t?e.jsx(E,{sx:{width:600,margin:"auto"},children:e.jsxs(P,{children:[e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{size:{xs:6},children:e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Posters Galore"})}),e.jsx(b,{size:{xs:6},children:e.jsxs(u,{variant:"h6",gutterBottom:!0,align:"right",children:["Invoice ",t.id]})})]}),e.jsx(b,{container:!0,spacing:2,children:e.jsx(b,{size:{xs:12},sx:{alignContent:"flex-end"},children:e.jsx(R,{reference:"customers",source:"customer_id",link:!1,children:e.jsx(On,{})})})}),e.jsx(x,{sx:{height:20},children:"Â "}),e.jsxs(b,{container:!0,spacing:2,children:[e.jsxs(b,{size:{xs:6},children:[e.jsxs(u,{variant:"h6",gutterBottom:!0,align:"center",children:["Date"," "]}),e.jsx(u,{gutterBottom:!0,align:"center",children:new Date(t.date).toLocaleDateString()})]}),e.jsxs(b,{size:{xs:5},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,align:"center",children:"Order"}),e.jsx(R,{reference:"orders",source:"order_id",link:!1,children:e.jsx(D,{source:"reference",align:"center",component:"p",gutterBottom:!0})})]})]}),e.jsx(x,{sx:{margin:"10px 0"},children:e.jsx(R,{reference:"orders",source:"order_id",link:!1,children:e.jsx(Er,{})})})]})}):null},"InvoiceShow"),On=n(()=>{const t=T();return t?e.jsxs(u,{children:[t.first_name," ",t.last_name,e.jsx("br",{}),t.address,e.jsx("br",{}),t.city,", ",t.zipcode]}):null},"CustomerField"),Mn=[e.jsx(Le,{source:"date_gte",alwaysOn:!0}),e.jsx(Le,{source:"date_lte",alwaysOn:!0}),e.jsx(se,{source:"customer_id",reference:"customers"}),e.jsx(se,{source:"order_id",reference:"orders"})],Un=n(()=>e.jsxs(q,{children:[e.jsx(ut,{}),e.jsx(xt,{}),e.jsx(He,{})]}),"ListActions"),Nn=n(()=>{const t=O(),{defaultTitle:r}=N();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"InvoicesTitle"),Se=$.Col,Me=$.NumberCol,Wn=n(()=>e.jsx(xe,{filters:Mn,perPage:25,sort:{field:"date",order:"DESC"},actions:e.jsx(Un,{}),title:e.jsx(Nn,{}),children:e.jsxs($,{rowClick:"expand",expand:e.jsx(Bn,{}),sx:{"& .onlyLarge":{display:{xs:"none",lg:"table-cell"}}},children:[e.jsx(Se,{source:"id"}),e.jsx(Se,{field:L,source:"date"}),e.jsx(Se,{source:"customer_id",className:"onlyLarge",children:e.jsx(R,{source:"customer_id",reference:"customers",children:e.jsx(kr,{source:"last_name"})})}),e.jsx(Se,{source:"address",disableSort:!0,label:"resources.invoices.fields.address",children:e.jsx(R,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(Rn,{})})}),e.jsx(Se,{source:"order_id",children:e.jsx(R,{source:"order_id",reference:"orders"})}),e.jsx(Me,{source:"total_ex_taxes",className:"onlyLarge"}),e.jsx(Me,{source:"delivery_fees",className:"onlyLarge"}),e.jsx(Me,{source:"taxes",className:"onlyLarge"}),e.jsx(Me,{source:"total"})]})}),"InvoiceList"),zn={list:Wn,icon:yo},Hn=n(({color:t})=>e.jsx(_o,{sx:{color:t,marginLeft:-9.5}}),"CustomArrowDropDownIcon"),qn=n(({color:t})=>e.jsx(Co,{sx:{color:t,marginLeft:-9.5}}),"CustomArrowDropUpIcon"),Vn=n(({showLabel:t=!1,size:r="small",variant:s="outlined",minWidth:a=80})=>{const{currencies:o}=Sr(),{currency:i,setCurrency:c}=ne(),[d,m]=re.useState(!1),l=n(p=>{c(p.target.value)},"handleCurrencyChange"),h=re.useMemo(()=>o==null?void 0:o.filter(p=>p.type==="SELL"),[o]),j=re.useMemo(()=>()=>d?e.jsx(qn,{color:"#000"}):e.jsx(Hn,{color:"#000"}),[d]);return e.jsxs(x,{display:"flex",alignItems:"center",sx:{mt:-.4},children:[t&&e.jsx(u,{variant:"body2",sx:{mr:0,color:"#7A6A55"},children:"Currency:"}),e.jsx(bo,{size:r,sx:{minWidth:a},children:e.jsx(vo,{open:d,onOpen:n(()=>m(!0),"onOpen"),onClose:n(()=>m(!1),"onClose"),IconComponent:j,value:i,onChange:l,variant:s,sx:{cursor:"pointer","& .MuiSelect-select":{py:r==="small"?.5:1,px:r==="small"?-2:2,color:"#000"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"}},children:h==null?void 0:h.map(p=>e.jsx(wo,{value:p.ccy,children:e.jsx(x,{display:"flex",alignItems:"center",gap:1,children:e.jsx(u,{children:p.ccy})})},p.id))})})]})},"CurrencySelector"),Yn=n(()=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx(Vn,{}),e.jsx(gs,{}),e.jsx(js,{})]}),"AppBarToolbar"),Kn=n(()=>{const t=J(r=>r.breakpoints.up("sm"));return e.jsxs(fs,{color:"secondary",toolbar:e.jsx(Yn,{}),children:[e.jsx(ys,{}),t&&e.jsx(x,{component:"span",sx:{flex:1}})]})},"CustomAppBar"),Gn=f.lazy(()=>_e(()=>import("./vendor-ue79-INe.js").then(t=>t.bz),__vite__mapDeps([0,1,2])).then(t=>({default:t.RichTextInput}))),Qn=n(()=>e.jsx($e,{children:e.jsxs(V,{children:[e.jsx(I,{source:"title",validate:[_()],fullWidth:!0}),e.jsx(k,{sx:{my:.2}}),e.jsx(he,{source:"image",label:"Blog Image",children:e.jsx(H,{source:"src",title:"title"})}),e.jsx(k,{sx:{my:.2}}),e.jsxs("div",{style:{alignItems:"center",gap:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:8},children:e.jsx("button",{type:"button",onClick:n(async t=>{t.preventDefault();const r=document.createElement("input");r.type="file",r.accept="image/*",r.onchange=async()=>{if(r.files&&r.files[0])try{const s=await ue(r.files[0]);await navigator.clipboard.writeText(s),alert("Image link copied to clipboard!");const a=document.querySelector('[contenteditable="true"][role="textbox"]');if(a){const o=document.createElement("img");o.src=s,o.alt="uploaded image";const i=window.getSelection();if(i&&i.rangeCount>0){const c=i.getRangeAt(0);c.collapse(!1),c.insertNode(o),c.setStartAfter(o),c.setEndAfter(o),i.removeAllRanges(),i.addRange(c)}else a.appendChild(o);a.dispatchEvent(new Event("input",{bubbles:!0}))}}catch{alert("Failed to upload image")}},r.click()},"onClick"),style:{marginRight:8,cursor:"pointer",padding:"8px 16px",backgroundColor:"#3f51b5",color:"#fff",border:"none",borderRadius:"4px"},children:"Upload Image"})}),e.jsx(Gn,{source:"description",validate:[_()],fullWidth:!0})]})]})}),"BlogCreate"),Xn=f.lazy(()=>_e(()=>import("./vendor-ue79-INe.js").then(t=>t.bz),__vite__mapDeps([0,1,2])).then(t=>({default:t.RichTextInput}))),Jn=n(()=>e.jsxs(q,{children:[e.jsx(vs,{}),e.jsx(Re,{})]}),"BlogEditActions"),Zn=n(()=>{const{selectImage:t,setSelectImage:r}=Qe(),s=Ke(),a=Ee();return f.useEffect(()=>{r(null),s()},[a.pathname,r]),e.jsx(Ae,{actions:e.jsx(Jn,{}),children:e.jsxs(V,{children:[e.jsx(I,{source:"title",validate:[_()],fullWidth:!0}),e.jsx(k,{sx:{my:.2}}),e.jsx(he,{source:"image",label:"Blog Image",onChange:n(o=>{r(o)},"onChange"),children:e.jsx(H,{source:"src",title:"title"})}),e.jsx(H,{source:"image_url",label:"Current Image",sx:{display:t!==null?"none":"block"}}),e.jsx(k,{sx:{my:.2}}),e.jsxs("div",{style:{alignItems:"center",gap:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:8},children:e.jsx("button",{type:"button",onClick:n(async o=>{o.preventDefault();const i=document.createElement("input");i.type="file",i.accept="image/*",i.onchange=async()=>{if(i.files&&i.files[0])try{const c=await ue(i.files[0]);await navigator.clipboard.writeText(c),alert("Image link copied to clipboard!");const d=document.querySelector('[contenteditable="true"][role="textbox"]');if(d){const m=document.createElement("img");m.src=c,m.alt="uploaded image";const l=window.getSelection();if(l&&l.rangeCount>0){const h=l.getRangeAt(0);h.collapse(!1),h.insertNode(m),h.setStartAfter(m),h.setEndAfter(m),l.removeAllRanges(),l.addRange(h)}else d.appendChild(m);d.dispatchEvent(new Event("input",{bubbles:!0}))}}catch{alert("Failed to upload image")}},i.click()},"onClick"),style:{marginRight:8,cursor:"pointer",padding:"8px 16px",backgroundColor:"#3f51b5",color:"#fff",border:"none",borderRadius:"4px"},children:"Upload Image"})}),e.jsx(Xn,{source:"description",validate:[_()],fullWidth:!0})]}),e.jsx(qe,{source:"count"}),e.jsx("h3",{children:"Preview"}),e.jsx(bs,{children:n(({formData:o})=>e.jsxs("div",{style:{marginTop:2,padding:16,border:"1px solid #ccc",borderRadius:8},children:[e.jsx("h2",{children:o.title}),o.image_url&&e.jsx("img",{src:o.image_url,alt:"Preview",style:{marginTop:16,maxWidth:"100%",height:"auto"}}),e.jsx("div",{dangerouslySetInnerHTML:{__html:o.description}})]}),"children")})]})})},"BlogEdit"),ea=n(()=>{const t=T();if(!(t!=null&&t.description))return null;const s=n(o=>{const i=document.createElement("DIV");return i.innerHTML=o,i.textContent||i.innerText||""},"stripHtml")(t.description),a=s.length>100?s.substring(0,100)+"...":s;return e.jsx(u,{variant:"body2",sx:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a})},"DescriptionField"),ta=[e.jsx(le,{source:"q",alwaysOn:!0}),e.jsx(I,{source:"title"}),e.jsx(I,{source:"description"}),e.jsx(qe,{source:"count"})],ra=n(()=>e.jsxs(q,{children:[e.jsx(ut,{}),e.jsx(Pe,{}),e.jsx(He,{})]}),"BlogListActions"),sa=n(()=>e.jsx(Jt,{}),"BlogBulkActions"),oa=n(t=>t!=null&&t.image_url?e.jsx(Ce,{src:t.image_url,alt:t.collectionName,sx:{width:32,height:32}}):null,"ImageUrlField"),te=$.Col,na=n(()=>e.jsx(xe,{filters:ta,actions:e.jsx(ra,{}),sort:{field:"created",order:"DESC"},perPage:25,children:e.jsxs($,{bulkActionButtons:e.jsx(sa,{}),rowClick:"edit",children:[e.jsx(te,{source:"image_url",label:"Image",render:oa}),e.jsx(te,{source:"title"}),e.jsx(te,{source:"description",render:ea}),e.jsx(te,{source:"count"}),e.jsx(te,{source:"created",label:"Created",render:n(t=>e.jsx(L,{source:"created",record:t,showTime:!0}),"render")}),e.jsx(te,{source:"updated",label:"Updated",render:n(t=>e.jsx(L,{source:"updated",record:t,showTime:!0}),"render")}),e.jsx(te,{source:"edit",field:L,label:"Edit",render:Fe}),e.jsx(te,{source:"delete",field:L,label:"Delete",render:Re})]})}),"BlogList"),aa=n(()=>e.jsxs(q,{children:[e.jsx(Fe,{}),e.jsx(Re,{})]}),"BlogShowActions"),ia=n(()=>e.jsx(Ye,{actions:e.jsx(aa,{}),children:e.jsxs(ht,{children:[e.jsx(D,{source:"id"}),e.jsx(D,{source:"title"}),e.jsx(Ue,{source:"description"}),e.jsx(D,{source:"title"}),e.jsx(D,{source:"description"}),e.jsx(ws,{source:"image_url"}),e.jsx(L,{source:"created"}),e.jsx(L,{source:"updated"})]})}),"BlogShow"),Pr={list:na,create:Qn,edit:Zn,show:ia,icon:So},ca=[e.jsx(le,{source:"q",alwaysOn:!0},"q"),e.jsx(Q,{source:"verified",choices:[{id:"",name:"All Status"},{id:!0,name:"Verified"},{id:!1,name:"Unverified"}],label:"Status",emptyText:"All Status"},"verified"),e.jsx(Q,{source:"has_ordered",choices:[{id:"",name:"All Customers"},{id:!0,name:"Has Orders"},{id:!1,name:"No Orders"}],label:"Order Status",emptyText:"All Customers"},"has_ordered"),e.jsx(Q,{source:"emailVisibility",choices:[{id:"",name:"All Email Visibility"},{id:!0,name:"Email Visible"},{id:!1,name:"Email Hidden"}],label:"Email Visibility",emptyText:"All Email Visibility"},"emailVisibility"),e.jsx(le,{source:"email",label:"Search by Email",placeholder:"Enter email address"},"email")],la=n(()=>{const t=lt(),r=U(),s=n(async()=>{try{const{data:a}=await t.getList("customers",{pagination:{page:1,perPage:1e3},sort:{field:"created",order:"DESC"},filter:{}}),o=a.map(d=>({Name:d.name,Username:d.username,Email:d.email,Phone:d.phone_number,Verified:d.verified?"Yes":"No",Created:new Date(d.created).toLocaleDateString(),Updated:new Date(d.updated).toLocaleDateString()})),i=X.json_to_sheet(o),c=X.book_new();X.book_append_sheet(c,i,"Customers"),pt(c,`customers_export_${new Date().toISOString().split("T")[0]}.xlsx`),r("Excel file exported successfully",{type:"success"})}catch{r("Failed to export Excel file",{type:"error"})}},"handleExportExcel");return e.jsx(q,{children:e.jsx(oe,{onClick:s,startIcon:e.jsx(fr,{}),variant:"outlined",size:"small",children:"Export Excel"})})},"CustomerListActions"),da=n(()=>{const t=O(),{defaultTitle:r}=N();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"CustomerTitle$1"),Te=$.Col,ua=n(t=>t!=null&&t.avatar?e.jsx(Ce,{src:t.avatar,alt:t.name,sx:{width:32,height:32}}):null,"AvatarField$1"),xa=n(()=>e.jsx(xe,{filters:ca,sort:{field:"created",order:"DESC"},perPage:25,actions:e.jsx(la,{}),title:e.jsx(da,{}),children:e.jsxs($,{rowClick:"show",sx:{"& .column-avatar":{width:"48px"},"& .column-phone_number":{md:{display:"none"},lg:{display:"table-cell"}}},children:[e.jsx(Te,{source:"avatar",render:ua}),e.jsx(Te,{source:"name",label:"Name"}),e.jsx(Te,{source:"username",label:"Username"}),e.jsx(Te,{source:"email",field:mt}),e.jsx(Te,{source:"phone_number",label:"Phone"})]})}),"CustomerList"),ha=n(()=>{const t=T();return t?e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(Ce,{src:t.avatar,sx:{width:60,height:60}}),e.jsxs(x,{children:[e.jsx(u,{variant:"h6",children:t.name}),e.jsxs(u,{color:"textSecondary",variant:"body2",children:["@",t.username]})]})]}):null},"CustomerTitle"),ma=n(()=>{const t=T();if(!t||!t.address)return null;const{address:r,province:s,district:a}=t,o=r.is_international,i=[{label:"Shipping Name",value:r.shipping_name},{label:"Address Line 1",value:r.address_line_1},{label:"Address Line 2",value:r.address_line_2}];return o?i.push({label:"City",value:r.city},{label:"State/Region",value:r.state_region},{label:"Postal Code",value:r.postal_code},{label:"Country",value:r.country_name}):i.push({label:"Village",value:r.village},{label:"Province",value:s},{label:"District",value:a}),e.jsx(Ge,{elevation:2,sx:{width:"100%",mt:2},children:e.jsx(me,{sx:{"& .MuiTableCell-root":{padding:"8px"}},children:e.jsx(pe,{children:i.map(c=>e.jsxs(A,{children:[e.jsxs(v,{component:"th",scope:"row",sx:{fontWeight:"bold",width:"11%",textAlign:"right"},children:[c.label,":"]}),e.jsx(v,{children:c.value})]},c.label))})})})},"AddressField"),pa=n(()=>{var s,a,o,i,c,d,m,l,h;const t=T();if(!t)return null;const r={...t,address:(s=t.expand)==null?void 0:s.address_id,province:(c=(i=(o=(a=t.expand)==null?void 0:a.address_id)==null?void 0:o.expand)==null?void 0:i.province_id)==null?void 0:c.name,district:(h=(l=(m=(d=t.expand)==null?void 0:d.address_id)==null?void 0:m.expand)==null?void 0:l.district_id)==null?void 0:h.name};return e.jsx(ze,{value:r,children:e.jsxs(ht,{children:[e.jsx(ha,{}),e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Personal Information"}),e.jsx(D,{source:"email"}),e.jsx(D,{source:"phone_number"}),r.address&&e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Address"}),e.jsx(ma,{})]}),e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Account History"}),e.jsx(L,{source:"created",label:"Created at",showTime:!0}),e.jsx(L,{source:"updated",label:"Last updated",showTime:!0})]})})},"CustomerShowLayout"),ga=n(()=>e.jsx(Ye,{children:e.jsx(pa,{})}),"CustomerShow"),Ar={list:xa,show:ga,icon:bt},ja=n(({setSearchTerm:t})=>{const[r,s]=f.useState(""),a=n(o=>{s(o.target.value),t(o.target.value)},"handleSearch");return e.jsx(x,{sx:{p:2,display:"flex",alignItems:"center",mb:-1,mt:-2},children:e.jsx(We,{label:"Search",variant:"outlined",onChange:a,value:r,fullWidth:!0})})},"OrderListFilter"),fa=n(()=>{const t=B();return e.jsxs(x,{sx:{p:2},children:[e.jsx(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsx(u,{variant:"h5",component:"h5",children:t("pos.orders_management")})}),e.jsx(ya,{})]})},"OrderList"),Wt=[{id:"pending",name:"pending"},{id:"purchased",name:"purchased"},{id:"cancel",name:"cancel"}],ya=n(()=>{const[t,r]=f.useState("pending"),[s,a]=f.useState({}),[o,i]=f.useState(""),{currency:c}=ne(),d=J(h=>h.breakpoints.down("sm"));f.useEffect(()=>{n(async()=>{try{const j={};for(const p of Wt){const w=await g.collection("orders").getList(1,1,{filter:`status = "${p.id}"`});j[p.id]=w.totalItems}a(j)}catch(j){console.error("Error fetching order counts:",j)}},"fetchOrderCounts")()},[]);const m=f.useCallback((h,j)=>{if(r(j),d){const p=document.querySelector('[role="tablist"]');p&&p.scrollIntoView({behavior:"smooth",block:"start"})}},[d]),l=n(async()=>{try{let h=`status = "${t}"`;if(o){const C=`(reference_id ~ "${o}" || customer_name ~ "${o}" || phone_number ~ "${o}" || address ~ "${o}")`;h+=` && ${C}`}const j=await g.collection("orders").getFullList({filter:h,sort:"-created"}),p=await Promise.all(j.map(async C=>{const K=(await g.collection("order_items").getList(1,50,{filter:`order_id = "${C.id}"`})).items.reduce((ge,G)=>({lak:ge.lak+G.quantity*G.price_lak,usd:ge.usd+G.quantity*G.price_usd,thb:ge.thb+G.quantity*G.price_thb}),{lak:0,usd:0,thb:0});let M=0;switch(c){case"LAK":M=K.lak;break;case"USD":M=K.usd;break;case"THB":M=K.thb;break}return{Date:new Date(C.created).toLocaleString(),Reference:C.reference_id,Customer:C.customer_name,Phone:C.phone_number,Address:C.address,Status:C.status,Total:M,Currency:c}})),w=X.json_to_sheet(p),y=X.book_new();X.book_append_sheet(y,w,"Orders"),pt(y,`orders_${t}.xlsx`)}catch(h){console.error("Error downloading Excel:",h)}},"downloadExcel");return e.jsxs(f.Fragment,{children:[e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(ja,{setSearchTerm:i}),e.jsx(oe,{variant:"contained",onClick:l,sx:{m:2,ml:"auto",height:"50px"},children:"Export"})]}),e.jsx(Eo,{variant:"scrollable",scrollButtons:"auto",value:t,indicatorColor:"primary",onChange:n((h,j)=>m(h,j),"onChange"),children:Wt.map(h=>e.jsx(Po,{label:e.jsxs("span",{children:[h.name," (",s[h.id]||0,")"]}),value:h.id},h.id))}),e.jsx(k,{}),e.jsx("br",{}),e.jsx(va,{status:t,searchTerm:o})]})},"TabbedDatagrid"),ba=n(({order:t,details:r,onToggle:s,open:a})=>{const{currency:o}=ne(),c=n(()=>!r||!r.orderItems?{lak:0,usd:0,thb:0}:r.orderItems.reduce((l,h)=>({lak:l.lak+h.quantity*h.price_lak,usd:l.usd+h.quantity*h.price_usd,thb:l.thb+h.quantity*h.price_thb}),{lak:0,usd:0,thb:0}),"calculateTotals")(),d=n((l,h)=>{switch(h){case"LAK":return`â­${l.toLocaleString()}`;case"USD":return`$${l.toFixed(2)}`;case"THB":return`à¸¿${l.toFixed(2)}`;default:return l.toString()}},"formatCurrency"),m=n(()=>{switch(o){case"LAK":return d(c.lak,"LAK");case"USD":return d(c.usd,"USD");case"THB":return d(c.thb,"THB");default:return d(c.usd,"USD")}},"getCurrentTotal");return e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[e.jsx(v,{children:e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ke,{onClick:s,size:"small",children:a?e.jsx(To,{}):e.jsx(Io,{})}),e.jsx(L,{source:"created",record:t,showTime:!0})]})}),e.jsx(v,{children:t.reference_id}),e.jsx(v,{children:t.customer_name}),e.jsx(v,{children:t.phone_number}),e.jsx(v,{children:t.address}),e.jsx(v,{children:e.jsx(jt,{label:t.status,color:t.status==="pending"?"warning":t.status==="purchased"?"success":"error",size:"small"})}),e.jsx(v,{children:m()})]}),e.jsx(A,{children:e.jsx(v,{colSpan:7,sx:{paddingBottom:0,paddingTop:0},children:e.jsx(gr,{in:a,timeout:"auto",unmountOnExit:!0,children:e.jsx(x,{sx:{margin:2},children:!r||!r.customer?e.jsx(Zt,{}):e.jsxs(x,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,flexWrap:"wrap"},children:[e.jsx(x,{sx:{width:{xs:"100%",md:"33%"}},children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsxs(u,{variant:"h6",gutterBottom:!0,children:[e.jsx(Do,{sx:{mr:1,verticalAlign:"middle"}}),"Order Information"]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Reference:"})," ",t.reference_id]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Created:"})," ",new Date(t.created).toLocaleString()]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Status:"})," ",t.status]}),t.remark&&e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Remark:"})," ",t.remark]}),r.customer&&e.jsxs(x,{sx:{mt:2},children:[e.jsxs(u,{variant:"subtitle2",gutterBottom:!0,children:[e.jsx(Lo,{sx:{mr:1,verticalAlign:"middle"}}),"Customer Details"]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Name:"})," ",r.customer.name||r.customer.username]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Email:"})," ",r.customer.email]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Phone:"})," ",r.customer.phone_number]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Verified:"})," ",r.customer.verified?"Yes":"No"]})]}),r.address&&e.jsxs(x,{sx:{mt:2},children:[e.jsxs(u,{variant:"subtitle2",gutterBottom:!0,children:[e.jsx(ko,{sx:{mr:1,verticalAlign:"middle"}}),"Shipping Address"]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Name:"})," ",r.address.shipping_name]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Village:"})," ",r.address.village]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"District:"})," ",r.districtName||r.address.district_id]}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Province:"})," ",r.provinceName||r.address.province_id]})]})]})})}),e.jsx(x,{sx:{width:{xs:"100%",md:"42%"}},children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Order Items"}),r.orderItems.length>0?e.jsx(yt,{children:e.jsxs(me,{size:"small",children:[e.jsx(Be,{children:e.jsxs(A,{children:[e.jsx(v,{children:"Product"}),e.jsx(v,{align:"right",children:"Qty"}),e.jsx(v,{align:"right",children:"Price"}),e.jsx(v,{align:"right",children:"Total"})]})}),e.jsx(pe,{children:r.orderItems.map(l=>{const h=r.products[l.product_id],p=n(()=>{switch(o){case"LAK":return l.price_lak;case"USD":return l.price_usd;case"THB":return l.price_thb;default:return l.price_usd}},"getPrice")(),w=p*l.quantity;return e.jsxs(A,{children:[e.jsx(v,{children:(h==null?void 0:h.name)||l.product_name}),e.jsx(v,{align:"right",children:l.quantity}),e.jsx(v,{align:"right",children:d(p,o)}),e.jsx(v,{align:"right",children:d(w,o)})]},l.id)})})]})}):e.jsx(u,{variant:"body2",color:"text.secondary",children:"No items found"})]})})}),e.jsx(x,{sx:{width:{xs:"100%",md:"25%"}},children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Order Totals"}),e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{variant:"body2",children:"LAK:"}),e.jsx(u,{variant:"body2",fontWeight:"bold",children:d(c.lak,"LAK")})]}),e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{variant:"body2",children:"USD:"}),e.jsx(u,{variant:"body2",fontWeight:"bold",children:d(c.usd,"USD")})]}),e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{variant:"body2",children:"THB:"}),e.jsx(u,{variant:"body2",fontWeight:"bold",children:d(c.thb,"THB")})]}),e.jsx(k,{sx:{my:1}}),e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(u,{variant:"body1",fontWeight:"bold",children:["Current (",o,"):"]}),e.jsx(u,{variant:"body1",fontWeight:"bold",color:"primary",children:m()})]})]})]})})})]})})})})})]})},"OrderDetail"),va=f.memo(({status:t,searchTerm:r})=>{const[s,a]=f.useState([]),[o,i]=f.useState(!0),[c,d]=f.useState(null),[m,l]=f.useState(null),[h,j]=f.useState({}),p=n(async y=>{if(!(h[y]&&h[y].customer))try{const C=s.find(S=>S.id===y);let Y=null;if(C&&C.customer_id)try{Y=await g.collection("customers").getOne(C.customer_id)}catch(S){console.warn("Failed to fetch customer:",S)}let F=null,K=null,M=null;if(C&&C.address_id)try{if(F=await g.collection("addresses").getOne(C.address_id),F.province_id)try{K=(await g.collection("provinces").getOne(F.province_id)).name}catch(S){console.warn("Failed to fetch province:",S)}if(F.district_id)try{M=(await g.collection("districts").getOne(F.district_id)).name}catch(S){console.warn("Failed to fetch district:",S)}}catch(S){console.warn("Failed to fetch address:",S)}const ge=h[y].orderItems.map(S=>S.product_id),Wr=Array.from(new Set(ge)).map(async S=>{try{const Xe=await g.collection("products").getOne(S);return{id:S,data:Xe}}catch(Xe){return console.warn(`Failed to fetch product ${S}:`,Xe),null}}),zr=await Promise.all(Wr),Ct={};zr.forEach(S=>{S&&(Ct[S.id]=S.data)}),j(S=>({...S,[y]:{...S[y],customer:Y,address:F,products:Ct,provinceName:K,districtName:M}}))}catch(C){console.error("Error fetching order details:",C)}},"fetchOrderDetails"),w=n(y=>{const C=m===y?null:y;l(C),C&&p(C)},"handleToggle");return f.useEffect(()=>{n(async()=>{i(!0),d(null);try{let C=`status = "${t}"`;if(r){const M=`(reference_id ~ "${r}" || customer_name ~ "${r}" || phone_number ~ "${r}" || address ~ "${r}")`;C+=` && ${M}`}const F=(await g.collection("orders").getList(1,50,{filter:C,sort:"-created"})).items;a(F);const K={};await Promise.all(F.map(async M=>{const G=(await g.collection("order_items").getList(1,50,{filter:`order_id = "${M.id}"`})).items;K[M.id]={orderItems:G,customer:null,address:null,products:{},provinceName:null,districtName:null}})),j(K)}catch(C){console.error("Error fetching orders:",C),d("Failed to load orders")}finally{i(!1)}},"fetchOrders")()},[t,r]),o?e.jsx(Zt,{}):c?e.jsx(at,{severity:"error",children:c}):s.length===0?e.jsx(x,{sx:{p:2},children:e.jsxs(u,{variant:"body1",color:"text.secondary",children:["No orders found for status: ",t]})}):Array.isArray(s)?e.jsx(yt,{component:Ge,children:e.jsxs(me,{children:[e.jsx(Be,{children:e.jsxs(A,{children:[e.jsx(v,{children:"Date"}),e.jsx(v,{children:"Reference"}),e.jsx(v,{children:"Customer"}),e.jsx(v,{children:"Phone"}),e.jsx(v,{children:"Address"}),e.jsx(v,{children:"Status"}),e.jsx(v,{children:"Total"})]})}),e.jsx(pe,{children:s.map(y=>e.jsx(ba,{order:y,details:h[y.id],onToggle:n(()=>w(y.id),"onToggle"),open:m===y.id},y.id))})]})}):e.jsx(x,{sx:{p:2},children:e.jsx(at,{severity:"error",children:"Invalid data format for orders"})})}),wa=n(()=>{const t=T(),r=B();return e.jsx(me,{sx:{minWidth:"35em"},children:e.jsxs(pe,{children:[e.jsxs(A,{children:[e.jsx(v,{children:r("resources.orders.fields.basket.sum")}),e.jsx(z,{children:t==null?void 0:t.total_ex_taxes.toLocaleString(void 0,{style:"currency",currency:"USD"})})]}),e.jsxs(A,{children:[e.jsx(v,{children:r("resources.orders.fields.basket.delivery")}),e.jsx(z,{children:t==null?void 0:t.delivery_fees.toLocaleString(void 0,{style:"currency",currency:"USD"})})]}),e.jsxs(A,{children:[e.jsxs(v,{children:[r("resources.orders.fields.basket.taxes")," (",t==null?void 0:t.tax_rate.toLocaleString(void 0,{style:"percent"}),")"]}),e.jsx(z,{children:t==null?void 0:t.taxes.toLocaleString(void 0,{style:"currency",currency:"USD"})})]}),e.jsxs(A,{children:[e.jsx(v,{sx:{fontWeight:"bold"},children:r("resources.orders.fields.basket.total")}),e.jsx(z,{sx:{fontWeight:"bold"},children:t==null?void 0:t.total.toLocaleString(void 0,{style:"currency",currency:"USD"})})]})]})})},"Totals"),Ca=n(()=>e.jsx(Ae,{title:e.jsx(_a,{}),component:"div",children:e.jsx(Ia,{})}),"OrderEdit"),_a=n(()=>{const t=O(),{defaultTitle:r}=Ve();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"OrderTitle"),Sa=n(()=>{const t=T();return e.jsxs(u,{children:[e.jsxs(dt,{to:`/customers/${t==null?void 0:t.id}`,children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsx("br",{}),e.jsx(Ao,{href:`mailto:${t==null?void 0:t.email}`,children:t==null?void 0:t.email})]})},"CustomerDetails"),Ta=n(()=>{const t=T();return e.jsxs("div",{children:[e.jsxs(u,{children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsx(u,{children:t==null?void 0:t.address}),e.jsxs(u,{children:[t==null?void 0:t.city,", ",t==null?void 0:t.stateAbbr," ",t==null?void 0:t.zipcode]})]})},"CustomerAddress"),st=n(()=>e.jsx(x,{sx:{mb:1},children:"Â "}),"Spacer"),Ia=n(()=>{const t=B();return e.jsx(Cs,{children:e.jsxs(x,{sx:{maxWidth:"50em"},children:[e.jsx(_s,{filterDefaultValues:{status:"ordered"},sort:{field:"date",order:"DESC"}}),e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(b,{container:!0,spacing:1,children:[e.jsxs(b,{size:{xs:12,sm:12,md:8},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.order")}),e.jsxs(b,{container:!0,children:[e.jsx(b,{size:{xs:12,sm:12,md:6},children:e.jsx(ce,{source:"date",children:e.jsx(L,{source:"date"})})}),e.jsx(b,{size:{xs:12,sm:12,md:6},children:e.jsx(ce,{source:"reference",children:e.jsx(D,{source:"reference"})})})]}),e.jsxs(b,{container:!0,children:[e.jsx(b,{size:{xs:12,sm:12,md:6},children:e.jsx(Q,{source:"status",choices:[{id:"purchased",name:"purchased"},{id:"ordered",name:"ordered"},{id:"cancel",name:"cancel"},{id:"unknown",name:"unknown",disabled:!0}],sx:{width:"80%"}})}),e.jsx(b,{size:{xs:12,sm:12,md:6},children:e.jsx(x,{sx:{mt:2},children:e.jsx(Ss,{row:!0,source:"returned"})})})]})]}),e.jsxs(b,{size:{xs:12,sm:12,md:4},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.customer")}),e.jsx(R,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(Sa,{})}),e.jsx(st,{}),e.jsx(u,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.shipping_address")}),e.jsx(R,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(Ta,{})})]})]}),e.jsx(st,{}),e.jsx(u,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.items")}),e.jsx("div",{children:e.jsx(Er,{})}),e.jsx(st,{}),e.jsx(u,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.total")}),e.jsx("div",{children:e.jsx(wa,{})})]}),e.jsx(Ts,{})]})]})})},"OrderForm"),$r={list:fa,edit:Ca,icon:gt,recordRepresentation:"reference"},Da=n(({dense:t=!1})=>{const[r,s]=f.useState({menuCatalog:!0,menuSales:!0,menuCustomers:!0}),a=B(),[o]=Is();return e.jsxs(x,{sx:{width:o?200:50,marginTop:1,marginBottom:1,transition:n(i=>i.transitions.create("width",{easing:i.transitions.easing.sharp,duration:i.transitions.duration.leavingScreen}),"transition")},className:Ds({"RaMenu-open":o,"RaMenu-closed":!o}),children:[e.jsx(Ls,{}),e.jsx(je,{to:"/orders",state:{_scrollToTop:!0},primaryText:a("resources.orders.name",{smart_count:2}),leftIcon:e.jsx($r.icon,{}),dense:t}),e.jsx(je,{to:"/products",state:{_scrollToTop:!0},primaryText:a("resources.products.name",{smart_count:2}),leftIcon:e.jsx(wt.icon,{}),dense:t}),e.jsx(je,{to:"/categories",state:{_scrollToTop:!0},primaryText:a("resources.categories.name",{smart_count:2}),leftIcon:e.jsx(Dr.icon,{}),dense:t}),e.jsx(je,{to:"/blogs",state:{_scrollToTop:!0},primaryText:a("resources.blogs.name",{smart_count:2}),leftIcon:e.jsx(Pr.icon,{}),dense:t}),e.jsx(je,{to:"/customers",state:{_scrollToTop:!0},primaryText:a("resources.customers.name",{smart_count:2}),leftIcon:e.jsx(Ar.icon,{}),dense:t}),e.jsx(je,{to:"/users",state:{_scrollToTop:!0},primaryText:a("resources.users.name",{smart_count:2}),leftIcon:e.jsx(x,{sx:{ml:-.1,mt:.2},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.6em",height:"1.6em",viewBox:"0 -1 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M12 23C6.443 21.765 2 16.522 2 11V5l10-4l10 4v6c0 5.524-4.443 10.765-10 12M4 6v5a10.58 10.58 0 0 0 8 10a10.58 10.58 0 0 0 8-10V6l-8-3Z"}),e.jsx("circle",{cx:"12",cy:"8.5",r:"2.5",fill:"currentColor"}),e.jsx("path",{fill:"currentColor",d:"M7 15a5.78 5.78 0 0 0 5 3a5.78 5.78 0 0 0 5-3c-.025-1.896-3.342-3-5-3c-1.667 0-4.975 1.104-5 3"})]})}),dense:t})]})},"Menu"),La=n(({children:t})=>e.jsx(ks,{appBar:Kn,menu:Da,sx:{backgroundColor:n(r=>(r.vars||r).palette.background.default,"backgroundColor")},children:t}),"Layout"),ka=n(()=>{const[t,r]=f.useState(""),[s,a]=f.useState(""),o=Es(),i=U(),c=n(async d=>{d.preventDefault();try{await o({email:t,password:s})}catch{i("Invalid email or password",{type:"error"})}},"handleSubmit");return e.jsx(Ps,{children:e.jsx($o,{maxWidth:"sm",children:e.jsxs(Ge,{elevation:3,sx:{padding:4,marginTop:8,marginBottom:8},children:[e.jsx(u,{variant:"h5",align:"center",gutterBottom:!0,children:"Admin Login"}),e.jsxs(x,{component:"form",onSubmit:c,sx:{boxShadow:"none"},children:[e.jsx(We,{fullWidth:!0,label:"Email",name:"email",variant:"outlined",margin:"normal",type:"email",value:t,onChange:n(d=>r(d.target.value),"onChange")}),e.jsx(We,{fullWidth:!0,label:"Password",name:"password",variant:"outlined",margin:"normal",type:"password",value:s,onChange:n(d=>a(d.target.value),"onChange")}),e.jsx(oe,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{marginTop:2},children:"Login"})]})]})})})},"LoginPage"),Ea=n(()=>{const t=T(),r=er();return t?e.jsx(cr,{disablePadding:!0,children:e.jsxs(lr,{component:dt,to:r({resource:"reviews",type:"edit",id:t.id}),children:[e.jsx(Fo,{children:e.jsx(R,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(Lr,{size:"40"})})}),e.jsx(dr,{primary:e.jsxs(f.Fragment,{children:[e.jsx(R,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(As,{render:n(s=>`${s.first_name} ${s.last_name}`,"render"),variant:"subtitle1"})})," ","on"," ",e.jsx(R,{source:"product_id",reference:"products",link:!1,children:e.jsx(D,{source:"reference",variant:"subtitle1"})})]}),secondary:t.comment,secondaryTypographyProps:{noWrap:!0}})]})}):null},"ReviewItem"),Pa=n(()=>{const{data:t,error:r,isPending:s,total:a}=N();return s||r||Number(a)===0?null:e.jsx(ir,{sx:{width:"calc(100vw - 33px)"},children:t.map(o=>e.jsx(ze,{value:o,children:e.jsx(Ea,{})},o.id))})},"ReviewListMobile"),Fr=n(t=>e.jsx(R,{label:"Product",source:"product_id",reference:"products",...t,children:e.jsx(D,{source:"reference"})}),"ProductReferenceField"),Rr=n(t=>e.jsx(R,{source:"customer_id",reference:"customers",...t,children:e.jsx(kr,{source:"last_name"})}),"CustomerReferenceField"),Br=n(t=>{const{size:r="large"}=t,s=T(t);return s?e.jsx(x,{component:"span",sx:{display:"flex",opacity:.87,whiteSpace:"nowrap"},children:Array(s.rating).fill(!0).map((a,o)=>e.jsx(yr,{sx:{width:r==="large"?20:15,height:r==="large"?20:15}},o))}):null},"StarRatingField"),Aa=n(t=>r=>{let s={};return r?(t&&t===r.id&&(s={...s,backgroundColor:"action.selected"}),r.status==="accepted"?{...s,borderLeftColor:br[500],borderLeftWidth:5,borderLeftStyle:"solid"}:r.status==="pending"?{...s,borderLeftColor:vr[500],borderLeftWidth:5,borderLeftStyle:"solid"}:r.status==="rejected"?{...s,borderLeftColor:wr[500],borderLeftWidth:5,borderLeftStyle:"solid"}:s):s},"rowSx"),$a=[],Fa=n(()=>{const{selectedIds:t=$a}=N(),r=U(),s=tr("reviews"),[a,{isPending:o}]=rr("reviews",{ids:t,data:{status:"accepted"}},{mutationMode:"undoable",onSuccess:n(()=>{r("resources.reviews.notifications.approved_success",{type:"info",undoable:!0}),s()},"onSuccess"),onError:n(()=>{r("resources.reviews.notifications.approved_error",{type:"error"})},"onError")});return e.jsx(sr,{label:"resources.reviews.action.accept",onClick:n(()=>a(),"onClick"),disabled:o,children:e.jsx(Cr,{})})},"BulkAcceptButton"),Ra=[],Ba=n(()=>{const{selectedIds:t=Ra}=N(),r=U(),s=tr("reviews"),[a,{isPending:o}]=rr("reviews",{ids:t,data:{status:"rejected"}},{mutationMode:"undoable",onSuccess:n(()=>{r("resources.reviews.notifications.approved_success",{type:"info",undoable:!0}),s()},"onSuccess"),onError:n(()=>{r("resources.reviews.notifications.approved_error",{type:"error"})},"onError")});return e.jsx(sr,{label:"resources.reviews.action.reject",onClick:n(()=>a(),"onClick"),disabled:o,children:e.jsx(_r,{})})},"BulkRejectButton"),Oa=n(()=>e.jsxs(e.Fragment,{children:[e.jsx(Fa,{}),e.jsx(Ba,{}),e.jsx(Jt,{})]}),"ReviewsBulkActionButtons"),Ma=$,be=$.Col,Ua=n(({selectedRow:t})=>{const r=qt(),s=er();return e.jsxs(Ma,{rowClick:n((a,o)=>(r(s({resource:o,id:a,type:"edit"})),!1),"rowClick"),rowSx:Aa(t),bulkActionButtons:e.jsx(Oa,{}),sx:{"& .RaDataTable-thead":{borderLeftColor:"transparent",borderLeftWidth:5,borderLeftStyle:"solid"}},children:[e.jsx(be,{source:"date",field:L}),e.jsx(be,{source:"customer_id",children:e.jsx(Rr,{source:"customer_id",link:!1})}),e.jsx(be,{source:"product_id",children:e.jsx(Fr,{source:"product_id",link:!1})}),e.jsx(be,{source:"rating",label:"resources.reviews.fields.rating",field:Br}),e.jsx(be,{source:"comment",sx:{maxWidth:"18em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e.jsx(be,{source:"status"})]})},"ReviewListDesktop"),Na={accepted:br[500],pending:vr[500],rejected:wr[500]},Wa=[e.jsx(le,{source:"q",alwaysOn:!0}),e.jsx(Q,{source:"status",choices:[{id:"accepted",name:"Accepted"},{id:"pending",name:"Pending"},{id:"rejected",name:"Rejected"}],optionText:n(t=>e.jsxs(e.Fragment,{children:[e.jsx(x,{component:"span",sx:{bgcolor:Na[t.id],width:8,height:8,borderRadius:4,mr:1,display:"inline-block"}}),t.name]}),"optionText")}),e.jsx(se,{source:"customer_id",reference:"customers",children:e.jsx(Ne,{optionText:n(t=>t!=null&&t.id?`${t.first_name} ${t.last_name}`:"","optionText"),sx:{minWidth:200}})}),e.jsx(se,{source:"product_id",reference:"products",children:e.jsx(Ne,{optionText:"reference"})}),e.jsx(Le,{source:"date_gte"}),e.jsx(Le,{source:"date_lte"})],za=n(()=>{const t=B(),r=U(),s=we(),a=T(),[o,{isPending:i}]=or("reviews",{id:a==null?void 0:a.id,data:{status:"accepted"},previousData:a},{mutationMode:"undoable",onSuccess:n(()=>{r("resources.reviews.notifications.approved_success",{type:"info",undoable:!0}),s("/reviews")},"onSuccess"),onError:n(()=>{r("resources.reviews.notifications.approved_error",{type:"error"})},"onError")});return a&&a.status==="pending"?e.jsx(oe,{variant:"outlined",color:"primary",size:"small",onClick:n(()=>o(),"onClick"),sx:{borderColor:n(c=>c.palette.success.main,"borderColor")},startIcon:e.jsx(Cr,{sx:{color:n(c=>c.palette.success.main,"color")}}),disabled:i,children:t("resources.reviews.action.accept")}):e.jsx("span",{})},"AcceptButton"),Ha=n(()=>{const t=B(),r=U(),s=we(),a=T(),[o,{isPending:i}]=or("reviews",{id:a==null?void 0:a.id,data:{status:"rejected"},previousData:a},{mutationMode:"undoable",onSuccess:n(()=>{r("resources.reviews.notifications.rejected_success",{type:"info",undoable:!0}),s("/reviews")},"onSuccess"),onError:n(()=>{r("resources.reviews.notifications.rejected_error",{type:"error"})},"onError")});return a&&a.status==="pending"?e.jsx(oe,{variant:"outlined",color:"primary",size:"small",onClick:n(()=>o(),"onClick"),sx:{borderColor:n(c=>c.palette.error.main,"borderColor")},startIcon:e.jsx(_r,{sx:{color:n(c=>c.palette.error.main,"color")}}),disabled:i,children:t("resources.reviews.action.reject")}):e.jsx("span",{})},"RejectButton"),qa=n(t=>{const{resource:r}=t,s=we(),a=U(),o=T(t);return o?e.jsx(Ro,{sx:{display:"flex",justifyContent:"space-between",minHeight:{sm:0}},children:o.status==="pending"?e.jsxs(f.Fragment,{children:[e.jsx(za,{}),e.jsx(Ha,{})]}):e.jsxs(f.Fragment,{children:[e.jsx($s,{mutationOptions:{onSuccess:n(()=>{a("ra.notification.updated",{type:"info",messageArgs:{smart_count:1},undoable:!0}),s("list","reviews")},"onSuccess")},type:"button"}),e.jsx(Re,{record:o,resource:r})]})}):null},"ReviewEditToolbar"),Va=n(()=>{const t=O(),{defaultTitle:r}=Ve();return e.jsx("title",{children:`${t} - ${r}`})},"ReviewTitle$1"),Ya=n(({id:t,onCancel:r})=>{const s=B();return e.jsxs(Fs,{id:t,children:[e.jsx(Va,{}),e.jsxs(x,{sx:{pt:5,width:{xs:"100vW",sm:400},mt:{xs:2,sm:1}},children:[e.jsxs(Bo,{direction:"row",sx:{p:2},children:[e.jsx(u,{variant:"h6",sx:{flex:"1"},children:s("resources.reviews.detail")}),e.jsx(ke,{onClick:r,size:"small",children:e.jsx(pr,{})})]}),e.jsxs(V,{sx:{pt:0,pb:0},toolbar:e.jsx(qa,{}),children:[e.jsxs(b,{container:!0,rowSpacing:1,sx:{mb:1},children:[e.jsx(b,{size:{xs:6},children:e.jsx(ce,{source:"customer_id",children:e.jsx(Rr,{source:"customer_id"})})}),e.jsx(b,{size:{xs:6},children:e.jsx(ce,{label:"resources.reviews.fields.product_id",children:e.jsx(Fr,{})})}),e.jsx(b,{size:{xs:6},children:e.jsx(ce,{children:e.jsx(L,{source:"date"})})}),e.jsx(b,{size:{xs:6},children:e.jsx(ce,{label:"resources.reviews.fields.rating",children:e.jsx(Br,{})})})]}),e.jsx(I,{source:"comment",maxRows:15,multiline:!0})]})]})]})},"ReviewEdit"),Ka=n(()=>e.jsxs(q,{children:[e.jsx(ut,{}),e.jsx(Pe,{}),e.jsx(xt,{}),e.jsx(He,{})]}),"ReviewListActions"),Ga=n(()=>{const t=O(),{defaultTitle:r}=N();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"ReviewsTitle"),Qa=n(()=>{const t=J(i=>i.breakpoints.down("sm")),r=Ee(),s=qt(),a=f.useCallback(()=>{s("/reviews")},[s]),o=Yr("/reviews/:id",r.pathname);return e.jsxs(x,{sx:{display:"flex"},children:[e.jsx(xe,{sx:{flexGrow:1,transition:n(i=>i.transitions.create(["all"],{duration:i.transitions.duration.enteringScreen}),"transition"),marginRight:o?"400px":0},filters:Wa,perPage:25,sort:{field:"date",order:"DESC"},actions:e.jsx(Ka,{}),title:e.jsx(Ga,{}),children:t?e.jsx(Pa,{}):e.jsx(Ua,{selectedRow:o?parseInt(o.params.id,10):void 0})}),e.jsx(Oo,{variant:"persistent",open:!!o,anchor:"right",onClose:a,sx:{zIndex:100},children:!!o&&e.jsx(Ya,{id:o.params.id,onCancel:a})})]})},"ReviewList"),Xa=n(t=>{const{name:r="resources.reviews.fields.rating"}=t,{field:s}=Vt(t),a=B();return e.jsxs(x,{sx:{display:"flex",flexDirection:"column",marginBottom:"1rem"},children:[e.jsx(u,{children:a(r)}),e.jsx(Ja,{...s,icon:e.jsx(yr,{}),onChange:n((o,i)=>s.onChange(i),"onChange")})]})},"StarRatingInput"),Ja=ft(Mo)({"& .MuiRating-iconFilled":{color:"#000"},"& .MuiRating-iconHover":{color:"#000"}}),Za=n(()=>{const t=O(),{defaultTitle:r}=Gt();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"ReviewTitle"),ei=n(()=>{const t=U(),r=we(),s=Ee(),a=n(o=>{const i=Rs(s);t("resources.reviews.notifications.created"),i&&i.product_id?r(`/products/${i.product_id}/reviews`):r("/reviews")},"onSuccess");return e.jsx($e,{mutationOptions:{onSuccess:a},title:e.jsx(Za,{}),children:e.jsxs(V,{defaultValues:{status:"pending"},sx:{maxWidth:"30em"},children:[e.jsx(se,{source:"customer_id",reference:"customers",children:e.jsx(Ne,{validate:_()})}),e.jsx(se,{source:"product_id",reference:"products",children:e.jsx(Ne,{optionText:"reference",validate:_()})}),e.jsx(Le,{source:"date",defaultValue:new Date,validate:_()}),e.jsx(Xa,{source:"rating",defaultValue:2}),e.jsx(I,{source:"comment",multiline:!0,resettable:!0,validate:_()})]})})},"ReviewCreate"),ti={icon:Uo,list:Qa,create:ei},Or=[{id:"compulsive",name:"resources.segments.data.compulsive"},{id:"collector",name:"resources.segments.data.collector"},{id:"ordered_once",name:"resources.segments.data.ordered_once"},{id:"regular",name:"resources.segments.data.regular"},{id:"returns",name:"resources.segments.data.returns"},{id:"reviewer",name:"resources.segments.data.reviewer"}];Or.reduce((t,r)=>(t[r.id]=r,t),{});$.Col;$.NumberCol;const ri={icon:bt},si=n(({segment:t})=>{const r=B();return e.jsxs(oe,{size:"small",color:"primary",component:Ht,to:{pathname:"/customers",search:Qt.stringify({filter:{groups:t}})},state:{_scrollToTop:!0},sx:{display:"inline-flex",alignItems:"center"},children:[e.jsx(ri.icon,{sx:{paddingRight:"0.5em"}}),r("resources.segments.fields.customers")]})},"LinkToRelatedCustomers"),oi=n(()=>{const t=O(),r=B(),s=Bs(),a=r("ra.page.list",{name:s("segments",2)});return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${a}`}),e.jsxs(E,{sx:{mt:2},children:[e.jsx(Xt,{title:a}),e.jsxs(me,{size:"small",children:[e.jsx(Be,{children:e.jsxs(A,{children:[e.jsx(v,{children:r("resources.segments.fields.name")}),e.jsx(v,{})]})}),e.jsx(pe,{children:Or.map(o=>e.jsxs(A,{children:[e.jsx(v,{children:r(o.name)}),e.jsx(v,{children:e.jsx(si,{segment:o.id})})]},o.id))})]})]})]})},"Segments"),ni={palette:{primary:{main:"#D4AF37"},secondary:{main:"#D4AF37"},mode:"dark"},typography:{fontFamily:'"Noto Sans Lao", "Canela Trial", sans-serif'},sidebar:{width:200},components:{...nr.components,RaMenuItemLink:{styleOverrides:{root:{borderLeft:"3px solid #000","&.RaMenuItemLink-active":{borderLeft:"3px solid #90caf9"}}}},MuiFilledInput:{styleOverrides:{}},MuiAppBar:{styleOverrides:{colorSecondary:{color:"#ffffffb3",backgroundColor:"#616161"}},defaultProps:{elevation:1}}}},ai={palette:{primary:{main:"#4f3cc9"},secondary:{light:"#5f5fc4",main:"#283593",dark:"#001064",contrastText:"#fff"},background:{default:"#fcfcfe"},mode:"light"},typography:{fontFamily:'"Noto Sans Lao", "Canela Trial", sans-serif'},shape:{borderRadius:10},sidebar:{width:200},components:{...nr.components,RaMenuItemLink:{styleOverrides:{root:{borderLeft:"3px solid #fff","&.RaMenuItemLink-active":{borderLeft:"3px solid #4f3cc9"}}}},MuiPaper:{styleOverrides:{elevation1:{boxShadow:"none"},root:{border:"1px solid #e0e0e3",backgroundClip:"padding-box"}}},MuiAppBar:{styleOverrides:{colorSecondary:{color:"#808080",backgroundColor:"#fff"}},defaultProps:{elevation:1}},MuiLinearProgress:{styleOverrides:{colorPrimary:{backgroundColor:"#f5f5f5"},barColorPrimary:{backgroundColor:"#d7d7d7"}}},MuiTableRow:{styleOverrides:{root:{"&:last-child td":{border:0}}}}}},ii={palette:{mode:"dark",primary:{main:"#D4AF37"},background:{default:"#111111",paper:"#212121"},text:{primary:"#D4AF37"}},typography:{fontFamily:"'Pixelify Sans', cursive"},components:{MuiAutocomplete:{defaultProps:{fullWidth:!0}},MuiFormControl:{defaultProps:{fullWidth:!0}},MuiTextField:{defaultProps:{fullWidth:!0}},RaSimpleFormIterator:{defaultProps:{fullWidth:!0}}}},Mr=vt(),ci={palette:{mode:"light",bulkActionsToolbarBackgroundColor:No(Mr.palette.primary.light,.8)}},li={palette:{mode:"dark",bulkActionsToolbarBackgroundColor:Mr.palette.primary.dark}},di=vt({cssVariables:!0,defaultColorScheme:"light",colorSchemes:{light:ci,dark:li}}),zt={styleOverrides:{root:{"& .SubMenu .MuiMenuItem-root":{paddingLeft:24},"& .RaMenu-closed .SubMenu .MuiMenuItem-root":{paddingLeft:8}}}},ot=[{name:"soft",light:ai,dark:ni},{name:"cssVariables",single:di},{name:"default",light:Ms,dark:Os},{name:"B&W",light:{...Tt,components:{...Tt.components,RaSidebar:zt}},dark:{...St,components:{...St.components,RaSidebar:zt}}},{name:"nano",light:Ns,dark:Us},{name:"radiant",light:zs,dark:Ws},{name:"house",light:qs,dark:Hs},{name:"chiptune",light:ii}],ui=vt({palette:{primary:{main:"#C98B6B"},secondary:{main:"#C98B6B"},error:{main:"#B71C1C"},warning:{main:"#FF5722"},success:{main:"#8BC34A"},background:{default:"linear-gradient(to bottom right, #F5F5F5, #FBF8F4)",paper:"#FBF8F4"},text:{primary:"#000",secondary:"#000"}},typography:{fontFamily:'"Noto Sans Lao", "Canela Trial", sans-serif',button:{textTransform:"none"}},components:{MuiCssBaseline:{styleOverrides:{html:{fontFamily:"'Noto Sans Lao', 'Canela Trial', sans-serif"}}},MuiButton:{styleOverrides:{root:{borderRadius:"10px",color:"#F5F5F5",fontWeight:"bold",padding:"8px 14px","&:hover":{background:"linear-gradient(45deg, #ab6936 30%, #C98B6B 90%)"}}}}}}),xi=n(({children:t})=>{const r=Vs({key:"css"});return e.jsx(Kr,{value:r,children:e.jsx(Wo,{theme:ui,children:e.jsxs(hr,{dateAdapter:mr,children:[e.jsx(zo,{}),t]})})})},"MuiProvider"),hi=[e.jsx(le,{source:"q",alwaysOn:!0},"q"),e.jsx(Q,{source:"verified",choices:[{id:"",name:"All Status"},{id:!0,name:"Verified"},{id:!1,name:"Unverified"}],label:"Status",emptyText:"All Status"},"verified"),e.jsx(Q,{source:"emailVisibility",choices:[{id:"",name:"All Email Visibility"},{id:!0,name:"Email Visible"},{id:!1,name:"Email Hidden"}],label:"Email Visibility",emptyText:"All Email Visibility"},"emailVisibility"),e.jsx(le,{source:"email",label:"Search by Email",placeholder:"Enter email address"},"email"),e.jsx(le,{source:"username",label:"Search by Username",placeholder:"Enter username"},"username")],mi=n(()=>{const t=lt(),r=U(),s=n(async()=>{try{const{data:a}=await t.getList("users",{pagination:{page:1,perPage:1e3},sort:{field:"created",order:"DESC"},filter:{}}),o=a.map(d=>({"Full Name":d.full_name,Username:d.username,Email:d.email,Phone:d.phone_number,Verified:d.verified?"Yes":"No",Created:new Date(d.created).toLocaleDateString(),Updated:new Date(d.updated).toLocaleDateString()})),i=X.json_to_sheet(o),c=X.book_new();X.book_append_sheet(c,i,"Users"),pt(c,`users_export_${new Date().toISOString().split("T")[0]}.xlsx`),r("Excel file exported successfully",{type:"success"})}catch{r("Failed to export Excel file",{type:"error"})}},"handleExportExcel");return e.jsxs(q,{children:[e.jsx(oe,{onClick:s,startIcon:e.jsx(fr,{}),variant:"outlined",size:"small",children:"Export Excel"}),e.jsx(Pe,{}),e.jsx(xt,{})]})},"UserListActions"),pi=n(()=>{const t=O(),{defaultTitle:r}=N();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${r}`}),e.jsx("span",{children:r})]})},"UserTitle"),ie=$.Col,gi=n(t=>t!=null&&t.avatar?e.jsx(Ce,{src:t.avatar,alt:t.username,sx:{width:32,height:32}}):null,"AvatarField"),ji=n(()=>(J(t=>t.breakpoints.down("sm")),J(t=>t.breakpoints.down("md")),e.jsx(xe,{filters:hi,sort:{field:"created",order:"DESC"},perPage:25,actions:e.jsx(mi,{}),title:e.jsx(pi,{}),children:e.jsxs($,{rowClick:"edit",sx:{"& .column-phone_number":{md:{display:"none"},lg:{display:"table-cell"}}},children:[e.jsx(ie,{source:"avatar",render:gi}),e.jsx(ie,{source:"full_name",label:"Full Name"}),e.jsx(ie,{source:"username",label:"Username"}),e.jsx(ie,{source:"email",field:mt}),e.jsx(ie,{source:"phone_number",label:"Phone"}),e.jsx(ie,{source:"created",field:L,label:"Created"}),e.jsx(ie,{source:"updated",field:L,label:"Updated"})]})})),"UserList"),fi=n(()=>{const t=U(),r=we(),s=n(a=>{const o={};return a.username||(o.username="Username is required"),a.email||(o.email="Email is required"),a.full_name||(o.full_name="Full name is required"),a.password?a.password.length<8&&(o.password="Password must be at least 8 characters long"):o.password="Password is required",a.password!==a.passwordConfirm&&(o.passwordConfirm="Passwords do not match"),o},"validateForm");return e.jsx($e,{title:"Create User",mutationOptions:{onSuccess:n(()=>{t("User created successfully",{type:"success"}),r("list","users")},"onSuccess"),onError:n(a=>{t(`Error creating user: ${a.message}`,{type:"error"})},"onError")},children:e.jsx(V,{validate:s,children:e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:600},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),e.jsx(I,{source:"username",validate:[_()],fullWidth:!0,helperText:"Username must be unique"}),e.jsx(I,{source:"full_name",validate:[_()],fullWidth:!0,label:"Full Name"}),e.jsx(I,{source:"email",validate:[_(),ar()],fullWidth:!0,helperText:"Email must be unique"}),e.jsx(I,{source:"phone_number",fullWidth:!0,label:"Phone Number"}),e.jsx(he,{source:"avatar",label:"Avatar",children:e.jsx(H,{source:"src",title:"title"})}),e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Account Settings"}),e.jsx(Ie,{source:"password",validate:[_()],fullWidth:!0,helperText:"Password must be at least 8 characters long"}),e.jsx(Ie,{source:"passwordConfirm",validate:[_()],fullWidth:!0,label:"Confirm Password",helperText:"Must match the password above"})]})})})},"UserCreate"),yi=n(()=>{const{selectImage:t,setSelectImage:r}=Qe(),s=Ke(),a=Ee();return f.useEffect(()=>{r(null),s()},[a.pathname,r]),console.log("=> selectImage",t),e.jsx(Ae,{title:"Edit User",children:e.jsx(V,{children:e.jsxs(b,{container:!0,spacing:3,children:[e.jsx(b,{size:{xs:12,md:8},children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(I,{source:"username",validate:[_()],fullWidth:!0,helperText:"Username must be unique"}),e.jsx(I,{source:"full_name",validate:[_()],fullWidth:!0,label:"Full Name"}),e.jsx(I,{source:"email",validate:[_(),ar()],fullWidth:!0,helperText:"Email must be unique"}),e.jsx(I,{source:"phone_number",fullWidth:!0,label:"Phone Number"}),e.jsx(he,{source:"avatar",label:"Avatar",onChange:n(o=>{r(o)},"onChange"),children:e.jsx(H,{source:"src",title:"title"})}),e.jsx(H,{source:"avatar",label:"Current Image",sx:{display:t!==null?"none":"block"}})]}),e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Change Password"}),e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(Ie,{source:"oldPassword",fullWidth:!0,label:"Old Password",helperText:"Required to change the password"}),e.jsx(Ie,{source:"password",fullWidth:!0,helperText:"Leave empty to keep current password. Must be at least 8 characters long."}),e.jsx(Ie,{source:"passwordConfirm",fullWidth:!0,label:"Confirm Password",helperText:"Must match the password above"})]})]})})}),e.jsx(b,{size:{xs:12,md:4},children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"User Information"}),e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(x,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Avatar"}),e.jsx(bi,{})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",children:"User ID"}),e.jsx(D,{source:"id"})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",children:"Username"}),e.jsx(D,{source:"username"})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(L,{source:"created",showTime:!0})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",children:"Updated"}),e.jsx(L,{source:"updated",showTime:!0})]})]})]})})})]})})})},"UserEdit"),bi=n(()=>{const t=T();return t!=null&&t.avatar?e.jsx("img",{src:t.avatar,alt:"User Avatar",style:{width:80,height:80,borderRadius:"50%",objectFit:"cover"}}):null},"AvatarDisplay"),vi=n(()=>e.jsxs(q,{children:[e.jsx(Fe,{}),e.jsx(Re,{})]}),"UserShowActions"),wi=n(()=>e.jsx(Ye,{actions:e.jsx(vi,{}),title:"User Details",children:e.jsx(ht,{children:e.jsxs(b,{container:!0,spacing:3,children:[e.jsx(b,{size:{xs:12,md:8},children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"User Information"}),e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Full Name"}),e.jsx(D,{source:"full_name",variant:"h6"})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Username"}),e.jsx(D,{source:"username"})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Email"}),e.jsx(mt,{source:"email"})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Phone Number"}),e.jsx(D,{source:"phone_number"})]})]})]})})}),e.jsx(b,{size:{xs:12,md:4},children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"System Information"}),e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"User ID"}),e.jsx(D,{source:"id"})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Collection ID"}),e.jsx(D,{source:"collectionId"})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Collection Name"}),e.jsx(D,{source:"collectionName"})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Created"}),e.jsx(L,{source:"created",showTime:!0})]}),e.jsxs(x,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Last Updated"}),e.jsx(L,{source:"updated",showTime:!0})]})]})]})})})]})})}),"UserShow"),Ci={list:ji,create:fi,edit:yi,show:wi,icon:bt},_i=Ys(t=>t==="la"?_e(()=>import("./la-Bky_15MC.js"),__vite__mapDeps([4,0,1,2])).then(r=>r.default):$n,"en",[{locale:"en",name:"English"},{locale:"la",name:"Lao"}]),Ur=Qs(void 0,"ECommerce"),Si=n(()=>{var o,i,c;const[t]=Xs("themeName","soft"),r=(o=ot.find(d=>d.name===t))==null?void 0:o.single,s=(i=ot.find(d=>d.name===t))==null?void 0:i.light,a=(c=ot.find(d=>d.name===t))==null?void 0:c.dark;return e.jsxs(Qr,{title:"Posters Galore Admin",dataProvider:En(),store:Ur,authProvider:Ko,dashboard:In,loginPage:ka,layout:La,i18nProvider:_i,disableTelemetry:!0,theme:r,lightTheme:s,darkTheme:a,defaultTheme:"light",requireAuth:!0,children:[e.jsx(Js,{children:e.jsx(Xr,{path:"/segments",element:e.jsx(oi,{})})}),e.jsx(Z,{name:"customers",...Ar}),e.jsx(Z,{name:"orders",...$r}),e.jsx(Z,{name:"invoices",...zn}),e.jsx(Z,{name:"products",...wt}),e.jsx(Z,{name:"categories",...Dr}),e.jsx(Z,{name:"reviews",...ti}),e.jsx(Z,{name:"blogs",...Pr}),e.jsx(Z,{name:"users",...Ci})]})},"App"),Ti=new Ks,Ii=n(()=>e.jsx(Gs,{value:Ur,children:e.jsx(Gr,{client:Ti,children:e.jsx(xi,{children:e.jsx(Go,{children:e.jsx(Si,{})})})})}),"AppWrapper"),Nr=document.getElementById("root");if(!Nr)throw new Error("No container found");const Di=Jr.createRoot(Nr);Di.render(e.jsx(Ii,{}));
//# sourceMappingURL=index-BV2nViqK.js.map
